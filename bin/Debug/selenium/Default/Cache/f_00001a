GuestLogIn=function(){this.init.apply(this,arguments)};GuestLogIn.prototype={_ENTER_KEY_CODE:13,_loginReady:true,_retryCount:0,_retryCountForOTP:0,_notFoundUser:2,_notMatchedIdc:3,_needCaptcha:4,_nReturnCodeFailToSendOTPMail:99,_nReturnCodeWrongIDC:22,init:function(b,a){this._root=$(b);if(a=="otp"){$("#otp_wrap").show()}else{$("#pwd_wrap").show()}this._attachEvent()},_attachEvent:function(){var a=this;$("#inputId").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._sendOTP()}});$("#otp").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#linkPass").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._loginByPassword()}});$("#captchaValue").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._loginByPassword()}});$("#oneBrowserLayer").on("mouseenter",function(){if($("#isMobileClient").val()=="false"){$("#oneBrowserLayer").addClass("show_tooltip")}});$("#oneBrowserLayer").on("mouseleave",function(){$("#oneBrowserLayer").removeClass("show_tooltip")});$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("#sendOTPBtn").click(function(){a._sendOTP()});$("#loginBtn").click(function(){a._login()});$("#loginByPWBtn").click(function(){a._loginByPassword()});$("#refreshButton").click(function(){a._setCaptchaImage($("#captchaKey").val())})},_otpTimeChecker:function(b){var d=b*60;var a,c;a=parseInt(d/60%60,10);c=parseInt(d%60,10);$("#otpTimer").text("0"+a+":00");d-=1;_this=this;interval=setInterval(function(){a=parseInt(d/60%60,10);c=parseInt(d%60,10);a=a<10?"0"+a:a;c=c<10?"0"+c:c;if(a!=0){$("#otpTimer").text(a+":"+c)}else{if(a==0&&c!=0){$("#otpTimer").text("00:"+c)}}if(--d<0){d=0;$("#otpTimer").text(a+":"+c);$("#sendOTPBtn").text(Message.GUEST_LOGIN_ID_6);$("#sendOTPBtn").removeClass("disabled");$("#sendOTPBtn").show();$("#loginBtn").addClass("disabled");_this._changeDefaultMessageText(Message.GUEST_LOGIN_OTP_EXPIRED_MESSAGE);$("#otp").val("");_this._loginReady=false;clearInterval(interval)}},1000)},_changeUIAfterSendOTP:function(a){$("#otpLayer").show();$("#loginBtn").show();$("#sendOTPBtn").text(Message.GUEST_LOGIN_ID_6);$("#sendOTPBtn").addClass("disabled");$("#sendOTPBtn").hide();$("#loginBtn").removeClass("disabled");$("#mainSubject").show();$("#errorSubject").hide();if(a=="Y"){$("#oneBrowserLayer").show()}},_resetTimer:function(){$("#otpTimer").text(":"+0);clearInterval(interval)},_changeDefaultMessageText:function(a){$("#defaultMsg").text(a);$("#defaultMsg").show();$("#mainSubject").hide();$("#errorSubject").show()},_changeDefaultMessageTextForPassword:function(a){$("#pwDefaultMsg").text(a);$("#pwDefaultMsg").show()},_inputValidCheckForOTP:function(){var a=$("#inputId");if($.trim($(a).val())==""){$(a).focus();return false}var b=$.trim($(a).val());for(var c=0;c<b.length;c++){if(b.charAt(c)==" "){this._changeDefaultMessageText(Message.GUEST_LOGIN_ID_2);return false}}return true},_inputValidCheck:function(){var a=$("#inputId");var d=$("#otp");if($.trim($(a).val())==""){$(a).focus();return false}if($.trim($(d).val())==""){$(d).focus();return false}var b=$.trim($(a).val());for(var c=0;c<b.length;c++){if(b.charAt(c)==" "){this._changeDefaultMessageText(Message.GUEST_LOGIN_ID_2);return false}}return true},_sendOTP:function(){if($("#sendOTPBtn").hasClass("disabled")){return}if(typeof interval!=="undefined"){clearInterval(interval)}this._loginReady=true;this._otpTimeChecker(5);try{if(!this._inputValidCheckForOTP()){return}_this=this;var a=$.trim($("#inputId").val());$.ajax({url:"/guest/sendOTP",type:"POST",async:false,dataType:"json",beforeSend:function(c){c.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:a,accessUrl:$("#accessUrl").val()}),success:function(c){if(c.returnCode==0){_this._changeUIAfterSendOTP(c.oneBrowserUseYn)}else{if(c.returnCode==_this._nReturnCodeWrongIDC){_this._resetTimer();if(_this._retryCountForOTP==0){_this._retryCountForOTP++;_this._sendOTP()}else{_this._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);_this._retryCountForOTP=0}}else{_this._resetTimer();_this._changeDefaultMessageText(c.returnMessage)}}},error:function(c,e,d){_this._resetTimer();if(_this._retryCountForOTP<5){_this._retryCountForOTP++;_this._sendOTP()}else{_this._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);_this._retryCountForOTP=0}}})}catch(b){_this._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE)}},_login:function(){_this=this;try{if(!this._loginReady){return}if(!this._inputValidCheck()){return}this._loginReady=false;var a=$.trim($("#inputId").val());$.ajax({url:"/guest/loginProcess",type:"POST",async:false,dataType:"json",beforeSend:function(c){c.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),inputId:a,otp:$.trim($("#otp").val())}),success:function(c){if(c.returnCode==0){window.location=c.accessUrl}else{if(c.returnCode==_this._nReturnCodeWrongIDC){_this._loginReady=true;if(_this._retryCount==0){_this._retryCount++;_this._login()}else{_this._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}}else{_this._changeDefaultMessageText(c.returnMessage)}}},error:function(c,e,d){_this._loginReady=true;if(_this._retryCount<5){_this._retryCount++;_this._login()}else{_this._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}}})}catch(b){_this._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE)}finally{_this._loginReady=true}},_loginByPassword:function(){_this=this;try{if(!this._loginReady){return}var b=$("#linkPass");if($.trim(b.val())==""){$(b).focus();return false}var a=$("#captchaValue");if($("#captchaValue").val()!=""&&$.trim(a.val())==""){$(a).focus();return false}var c=new RSAKey();c.setPublic($("#RSAModulus").val(),$("#RSAExponent").val());var d=c.encrypt(b.val());this._loginReady=false;$.ajax({url:"/guest/loginProcessByPassword",type:"POST",async:false,dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),password:d,captchaKey:$("#captchaKey").val(),captchaValue:$("#captchaValue").val()}),success:function(e){if(e.returnCode==0){if(e.accessUrl!=$("#accessUrl").val()){_this._changeDefaultMessageTextForPassword(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}else{window.location=e.accessUrl}}else{if(e.returnCode==_this._nReturnCodeWrongIDC){_this._loginReady=true;if(_this._retryCount==0){_this._retryCount++;_this._loginByPassword()}else{_this._changeDefaultMessageTextForPassword(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0;$(b).focus()}}else{if(e.returnCode==_this._needCaptcha){_this._captchaOn(e.captchaKey,e.returnMessage);$(b).focus()}else{_this._changeDefaultMessageTextForPassword(e.returnMessage);$(b).focus()}}}},error:function(e,h,g){_this._loginReady=true;if(_this._retryCount<5){_this._retryCount++;_this._loginByPassword()}else{_this._changeDefaultMessageTextForPassword(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}}})}catch(f){_this._changeDefaultMessageTextForPassword(Message.DEFAULT_ERROR_MESSAGE)}finally{_this._loginReady=true;$("#linkPass").val("");$("#captchaValue").val("")}},_captchaOn:function(a,b){if($("#pwd_wrap").hasClass("fm_login")){this._changeDefaultMessageTextForPassword(b)}else{this._changeDefaultMessageTextForPassword("");$("#pwMainSubject").hide();$("#pwd_wrap").addClass("fm_login")}$("#captchaKey").val(a);this._setCaptchaImage(a)},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+Math.floor(Math.random()*1000)+1;$("#captchaImage").attr("src",a)}};IdFind=function(){this.init.apply(this,arguments)};IdFind.prototype={_nReturn_code_not_exists_user:21,init:function(c){var a=["one_app","one_pc","drive_client"];sServiceId=c.serviceId;isUseOneAppLoginPage=false;for(var b=0;b<a.length;b++){if(sServiceId==a[b]){isUseOneAppLoginPage=true;break}}sBrowserLanguage=c.browserLanguage;bIsAndroid=c.isAndroid;bIsAbuser=c.isAbuser;this._findType=c.findType;this._mobileOrEmail="mobile";if(sBrowserLanguage=="ko_KR"){this.setCountry($('#countryList1 li[code="+82"]'))}else{if(sBrowserLanguage=="ja_JP"){this.setCountry($('#countryList1 li[code="+81"]'))}else{if(sBrowserLanguage=="zh_CN"){this.setCountry($('#countryList1 li[code="+86"]'))}else{if(sBrowserLanguage=="zh_TW"){this.setCountry($('#countryList1 li[code="+886"]'))}else{this.setCountry($('#countryList1 li[code="+1"]'))}}}}this._attachEvent();$("input").prop("disabled","");if(bIsAbuser){$("#inputId").attr("disabled",true)}},_attachEvent:function(){var a=this;$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("._countryBtn").click(function(){if(!$("._countryList").hasClass("freeze")){$("._countryList").toggle()}});$("._countryList li").click(function(){a.setCountry($(this))});$("#findId").click(function(){a.findId()});$("#divFindIdResult ._ok").click(function(){window.location=$("#accessUrl").val()});$("#certification_type input").click(function(){if($(this).parent().find("label").hasClass("on")){return}$("#certification_type label").removeClass("on");$(this).parent().find("label").addClass("on");a._clearInputBox();$("#container .wrong_message").hide();if($(this).hasClass("_by_mobile")){$("#divFindByMobile").show();$("._only_mobile").show();a._mobileOrEmail="mobile"}else{$("#divFindByEmail").show();$("._only_mobile").hide();a._mobileOrEmail="email"}});$("#ulFindTab li").click(function(){location.href="/view/find/"+$(this).attr("findType")+"?accessUrl="+encodeURIComponent($("#accessUrl").val())+"&customDomain="+$("#customDomain").val()+"&serviceId="+sServiceId});$("#sendAuthNo").click(function(){a.sendAuthNo()});$("#findPassword").click(function(){a.findPassword()});$("#btnCancel").click(function(){if(isUseOneAppLoginPage){location.href=$("#accessUrl").val()}else{location.href="/login/login?accessUrl="+$("#accessUrl").val()+"&customDomain="+$("#customDomain").val()}});if(bIsAndroid=="true"){$("#auth_value").focusin(function(){$("#footer").css({"padding-bottom":200+"px",zoom:1});$(window).resize(function(){$("#footer").css({"padding-bottom":200+"px",zoom:1})})});$("#auth_value").focusout(function(){$("#footer").css({"padding-bottom":"",zoom:""});$(window).resize(function(){$("#footer").css({"padding-bottom":"",zoom:""})})});$("#email").focusin(function(){$("#footer").css({"padding-bottom":200+"px",zoom:1});$(window).resize(function(){$("#footer").css({"padding-bottom":200+"px",zoom:1})})});$("#email").focusout(function(){$("#footer").css({"padding-bottom":"",zoom:""});$(window).resize(function(){$("#footer").css({"padding-bottom":"",zoom:""})})});$("#phone").focusin(function(){$("#footer").css({"padding-bottom":200+"px",zoom:1});$(window).resize(function(){$("#footer").css({"padding-bottom":200+"px",zoom:1})})});$("#phone").focusout(function(){$("#footer").css({"padding-bottom":"",zoom:""});$(window).resize(function(){$("#footer").css({"padding-bottom":"",zoom:""})})})}},setCountry:function(a){$("._country img").attr("src",a.find("img").attr("src"));$("._country span._code_num").html(a.attr("code"));$("._countryList").hide()},findId:function(){$("#wrong_message1").hide();$("#wrong_message2").hide();$("#wrong_message3").hide();var a=$("#countryCode").text().trim();var d=$("#auth_value").val();var c=$("#_hidden_auth_key").val();var b=$("#_hidden_location").val();if(this._mobileOrEmail=="mobile"){var e=$("#phone").val();if(this._checkValidIdFind(e,c,d)==false){return}this.findByPhoneAjax(e,a,c,d,b)}else{var f=$("#email").val();if(this._checkValidIdFind(f,c,d)==false){return}this.findByEmailAjax(f,c,d,b)}},_checkValidIdFind:function(c,a,b){if(c==""){$("#wrong_message1").show();return false}if(a==""){if(this._mobileOrEmail=="mobile"){this._showWrongMessage3(Message.ADDED_MSG_116)}else{this._showWrongMessage3(Message.ADDED_MSG_117)}return false}if(b==""){$("#wrong_message1").show();return false}return true},findByPhoneAjax:function(e,a,c,d,b){var f=this;$.post("/rl/"+b+"/idpw/findId",{countryNo:a,phone:e,authKey:c,authNo:d},function(g){f.callbackIdFind(g,a+" "+e)})},findByEmailAjax:function(e,b,c,a){var d=this;$.post("/rl/"+a+"/idpw/findIdByEmail",{email:e,authKey:b,authNo:c},function(f){d.callbackIdFind(f,e)})},callbackIdFind:function(c,a){var f=c.emails;if(c.code=="00"){$("#divFindIdResult ._result_name").html(Message.replaceParam(Message.FIND_ID_04,a));var e="";for(var b=0,d=f.length;b<d;b++){e+="<p>"+f[b]+"</p>"}$("#divFindIdResult ._result_id").html(e);$("#divIdFind").hide();$("#divFindIdResult").show()}else{if(c.code=="53"){this._showWrongMessage3(c.message)}else{if(c.code=="55"||c.code=="56"){$("#auth_value").val("");$("#auth_value").parent().find("label").removeClass("blind");this._showWrongMessage3(c.message)}else{$("#wrong_message2").show()}}}},sendAuthNo:function(){$(".wrong_message").hide();var b=$("#inputId").val().trim();var a="";var c="";if(this._findType!="id"&&b.indexOf("@")<1){this._showWrongMessage3(Message.NEW_LOGIN_038);$("#inputId").focus();return}if(this._mobileOrEmail=="mobile"){this._sendAuthNoToMobile(b,a,c)}else{this._sendAuthNoToEmail(b,a,c)}},_checkValidCommon:function(b,a){var c=b.val();if(c==""){this._showWrongMessage3(a);return false}return true},_checkValidMobile:function(a){if(this._checkValidCommon(a,Message.FIND_PW_09)==false){return false}if($.isNumeric(a.val())==false){this._showWrongMessage3(Message.FIND_PW_22);return false}return true},_checkValidEmail:function(b){if(this._checkValidCommon(b,Message.FIND_PW_16)==false){return false}if(b.val()!=b.val().toLowerCase()){this._showWrongMessage3(Message.FIND_PW_21);return false}var a=/^[\-_.0-9a-zA-Z]{1,40}@[\-_.0-9a-zA-Z]{1,255}\.[a-zA-z]{2,}$/;if(a.test(b.val())==false){this._showWrongMessage3(Message.FIND_PW_20);return false}return true},_sendAuthNoToMobile:function(c,b,g){var e=$("#phone");var d=e.val();var a=$("#countryCode").text().trim();var f=this;if(this._checkValidMobile(e)==false){return}$.post("/idpw/sendSms",{email:c,phone:d,countryNo:a,findType:f._findType},function(h){if(h.code=="00"){$("#_hidden_auth_key").val(h.authNoKey);$("#_hidden_location").val(h.location);$("#sendAuthNo").text(Message.FIND_PW_05);e.prop("disabled","disabled");$("._countryList").css("display","none").addClass("freeze");alert(h.message)}else{if(h.code=="32"){f._sendAuthNoToMobile(c,b,g,d,a,e);return}else{f._showWrongMessage3(h.message)}}})},_sendAuthNoToEmail:function(b,a,f){var e=$("#email");var c=e.val().trim();if(this._checkValidEmail(e)==false){return}var d=this;$.post("/idpw/sendEmail",{email:b,privateEmail:c,findType:d._findType},function(g){if(g.code=="00"){$("#sendAuthNo").text(Message.FIND_PW_05);$("#_hidden_auth_key").val(g.authNoKey);$("#_hidden_location").val(g.location);e.prop("disabled","disabled");alert(g.message)}else{if(g.code=="32"){d._sendAuthNoToEmail(b,a,f,c,e);return}else{d._showWrongMessage3(g.message)}}})},_showWrongMessage3:function(a){$("#wrong_message3").show().find("._msg").text(a)},findPassword:function(){var j=this;$("#wrong_message3").hide();var d=$("#inputId").val().trim();var e="";var b="";var c=$("#countryCode").text().trim();var h=$("#auth_value").val();var a=$("#_hidden_auth_key").val();if(d==""||h==""){j._showWrongMessage3(Message.FIND_PW_10);return}if(j._mobileOrEmail=="mobile"){if($("#_hidden_auth_key").val()==""){j._showWrongMessage3(Message.ADDED_MSG_116);return}var f=$("#phone");var i=f.val();if(i==""){j._showWrongMessage3(Message.FIND_PW_10);return}j._findPasswordByMobile(d,e,b,i,h,a,c)}else{if($("#_hidden_auth_key").val()==""){j._showWrongMessage3(Message.ADDED_MSG_117);return}var g=$("#email");var k=g.val();if(k==""){j._showWrongMessage3(Message.FIND_PW_16);return}j._findPasswordByEmail(d,e,b,k,h,a)}},_findPasswordByMobile:function(e,c,h,f,d,b,a){var g=this;$.post("/idpw/findPassword",{email:e,lastName:c,firstName:h,phone:f,authNo:d,authKey:b,countryNo:a},function(i){g._findPasswordCallback(i,e,c,h,f)})},_findPasswordByEmail:function(d,b,g,e,c,a){var f=this;$.post("/idpw/findPasswordByEmail",{email:d,lastName:b,firstName:g,privateEmail:e,authNo:c,authKey:a},function(h){f._findPasswordCallback(h,d,b,g,e)})},_findPasswordCallback:function(d,c,a,f,b){if(d.code=="00"){var e=$("#frmPwChange");$(e).find("input[name=tenantId]").val(d.tenantId);$(e).find("input[name=domainId]").val(d.domainId);$(e).find("input[name=userIdNo]").val(d.userIdNo);$(e).find("input[name=token]").val(d.token);$(e).find("input[name=accessUrl]").val($("#accessUrl").val());$(e).find("input[name=serviceCode]").val(this.sServiceCode);if(bIsAbuser){$(e).find("input[name=usage]").val("relieveBlackList");$(e).find("input[name=privateInfo]").val(b)}else{$(e).find("input[name=usage]").val("changePassword")}$(e).attr("action","/integrate/password/change/byToken").submit()}else{if(d.code=="55"){$("#auth_value").val("");$("#auth_value").parent().find("label").removeClass("blind")}this._showWrongMessage3(d.message)}},_clearInputBox:function(){$("div ._cert_type").hide();$("input._cert_type_input").val("").prop("disabled","");$("#auth_value").val("");$("._countryList").removeClass("freeze");$("#sendAuthNo").text(Message.FIND_PW_19)}};WebLogIn=function(){this.init.apply(this,arguments)};WebLogIn.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_sPartNo:1,_sMailDomain:"",_sCustomDomain:"",_loginReady:true,_retryCount:0,_nTwoStepLoginProgress:1,_notFoundUser:2,_notMatchedIdc:3,_needCaptcha:4,_nReturnCodeFailToSendOTPMail:99,_nReturnCodeWrongIDC:110,_nReturnCodeExpiredPw:24,_nReturnCodeChangePwForFirstUser:25,_nReturnCodeDomainStopStatus:76,_nReturnCodePendingDomainMember:72,_nReturnCodePendingDomainAdmin:75,_nReturnCodeDomainChangeName:141,_nReturnCodeWaitPendingMember:600,_webLoginServiceCode:"login_web",_SELECTED_TYPE_KEY:"selectedLoginType",_uaData:[],_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(e,b,a,c){var d=this;this._root=$(e);this._sPartNo=b;this._sMailDomain=a;this._sCustomDomain=c;if(this._sPartNo==1&&this._getLoginType()==="id"){oNweCommonUtils.attachLabelEvent($("#user_id"));if(oNweCommonUtils.getInternetExplorerVersion()<9){$("body").focus()}}else{oNweCommonUtils.attachAllLabelEvent();if($("#keepLogin").prop("checked")==true){$("#login_label").addClass("on")}else{$("#login_label").removeClass("on")}$("#login_label").click(function(){$(this).toggleClass("on");if($(this).hasClass("on")){$("#keepLogin").prop("checked",true)}else{$("#keepLogin").prop("checked",false)}});if(c>""){$("#inputId").focus();$("#inputId").parents(".inp").addClass("focus")}else{$("#password").focus();$("#password").parents(".inp").addClass("focus")}}this._setFingerPrint();this._attachEvent();this._browserCheck();if(sessionStorage.getItem(this._SELECTED_TYPE_KEY)==="id"){$("._idLoginOption").click();$("._userIdLabel").addClass("blind");$("#user_id").focus()}this._setClientHint()},_attachEvent:function(){var a=this;$(".inp input").focus(function(b){b.stopPropagation();$(this).parents(".inp").addClass("focus")}).focusout(function(b){b.stopPropagation();$(this).parents(".inp").removeClass("focus")});$("#user_id").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE&&a._getLoginType()==="id"){a._emailCheck()}});$("#user_id").on("input",function(){if($(this).val()!==""&&$(this).val()!=null){$(".inp").removeClass("failed");$("#div_fail_message").hide()}});$("#loginStart").click(function(){if(a._getLoginType()==="id"){a._emailCheck()}});$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("#password").on("input",function(c){$("#div_fail_message").hide();var b=$(this).val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#password").val($("#password").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#inputId").on("input",function(){$("#div_fail_message").hide()});$(".btn_masking").click(function(f){var d=$("#password");var g=d.attr("type");var c=g==="password"?"text":"password";d.attr("type",c);d.focus();var b=$(this);if(b.hasClass("checked")){b.removeClass("checked")}else{b.addClass("checked")}});$("#inputId").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#password").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#captchaValue").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#changeCaptchaBtn").click(function(b){a._setCaptchaImage($("#captchaKey").val())});$("#clearIdBtn").click(function(b){a._clearSavedId()});$("#loginBtn").click(function(b){a._login()});$("#findIdBtn").click(function(b){a._findId()});$("#lineLogin").click(function(b){a._lineLogin()});$("._loginOption").click(function(b){a._selectLoginOption($(b.target).attr("data-type"))})},_setClientHint:function(){var b=this;try{b._getUserAgentData().then(function(c){b._uaData=c},function(c){})}catch(a){}},_getUserAgentData:function(){try{var b=navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]);return b}catch(a){}},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)},_changeDefaultMessageText:function(a){$("#div_fail_message").show().find("p").text(a)},_inputValidCheck:function(a){var c=a?a:$.trim($("#user_id").val());if(c==""){$(".inp").addClass("failed");$("#div_fail_message").show();$("#user_id").focus();return false}var d=false;for(var b=0;b<c.length;b++){if(c.charAt(b)==" "){$(".inp").addClass("failed");$("#div_fail_message").show();$("#user_id").focus();return false}if(c.charAt(b)=="@"){d=true}}if(d==false){$(".inp").addClass("failed");$("#div_fail_message").show();$("#user_id").focus();return false}return true},_inputValidCheckForLogin:function(d,b){var a=$("#inputId");var c=$("#password");d=d?d:$.trim($("#inputId").val());b=b?b:$.trim($("#password").val());if(d.indexOf("@")>=0){this._changeDefaultMessageText(Message.WEB_LOGIN_1);$(a).focus();return false}if(d==""){this._changeDefaultMessageText(Message.WEB_LOGIN_2);$(a).focus();return false}if(b==""){this._changeDefaultMessageText(Message.WEB_LOGIN_3);$(c).focus();return false}if($("#divCaptcha").css("display")!="none"&&$("#captchaValue").val().length==0){this._changeDefaultMessageText(Message.WEB_LOGIN_4);$("#captchaValue").focus();return false}return true},_emailCheck:function(){var b=this;if(this._loginReady==false){return}var a=this._convertToHalfWidth($.trim($("#user_id").val()));if(this._inputValidCheck(a)==false){return}loginReady=false;try{$.get("/login/domainCheck",{userId:a},function(d){if(d.returnCode==0){$("#inputId").val(a);var e=window.location.href;if(e.substr(e.length-1,e.length)==="#"){e=e.substr(0,e.length-1)}var f="";if(e.indexOf("?")==-1){f="?userId=".concat(encodeURIComponent(a))}else{f="&userId=".concat(encodeURIComponent(a))}var c=e.concat(f);sessionStorage.setItem(b._SELECTED_TYPE_KEY,"id");location.href=c}else{if(d.returnCode==b._nReturnCodeWrongIDC){if(b._retryCount==0){b._retryCount++;b._emailCheck()}else{$(".inp").addClass("failed");$("#div_fail_message").show();b._retryCount=0}}else{$(".inp").addClass("failed");$("#div_fail_message").show()}}})}finally{b._loginReady=true}},_login:function(){var d=this;try{if(this._loginReady==false){return}var a=this._convertToHalfWidth($.trim($("#inputId").val()));var b=this._convertToHalfWidth($.trim($("#password").val()));if(this._inputValidCheckForLogin(a,b)==false){return}this._loginReady=false;a=a+"@"+this._sMailDomain;$.ajax({url:"/login/loginProcess",type:"POST",async:false,dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),inputId:a,password:b,keepLoginYn:($("#keepLogin").is(":checked")?"Y":"N"),captchaKey:$("#captchaKey").val(),captchaValue:$("#captchaValue").val(),customDomain:d._sCustomDomain,fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val()}),success:function(f){if(f.returnCode==0){window.location=f.accessUrl;sessionStorage.removeItem(d._SELECTED_TYPE_KEY)}else{if(f.returnCode==d._nReturnCodeWrongIDC){d._loginReady=true;if(d._retryCount==0){d._retryCount++;d._login()}else{d._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}}else{if(f.returnCode==d._nReturnCodeExpiredPw){var e=$("#changePasswordForm");$(e).find("input[name=tenantId]").val(f.tenantId);$(e).find("input[name=domainId]").val(f.domainId);$(e).find("input[name=userIdNo]").val(f.userIdNo);$(e).find("input[name=accessUrl]").val(f.accessUrl);$(e).find("input[name=token]").val(f.sessionKey);$(e).find("input[name=keepLoginYn]").val(f.keepLoginYn);$(e).find("input[name=serviceCode]").val(f.serviceCode);$(e).find("input[name=usage]").val("expiredPassword");$(e).attr("action","/integrate/password/change/expired").submit()}else{if(f.returnCode==d._nReturnCodeChangePwForFirstUser){var e=$("#changePasswordFormForFirstMember");$(e).find("input[name=id]").val(a);$(e).find("input[name=tenantId]").val(f.tenantId);$(e).find("input[name=accessUrl]").val(f.accessUrl);$(e).find("input[name=token]").val(f.token);$(e).find("input[name=from]").val(f.from);$(e).attr("action","/password/change/first").submit()}else{if(f.returnCode==d._nReturnCodeDomainStopStatus||f.returnCode==d._nReturnCodePendingDomainMember||f.returnCode==d._nReturnCodePendingDomainAdmin){var e=$("#domainStopStatusView");$(e).find("input[name=email]").val(f.email);$(e).find("input[name=memberAuthLevel]").val(f.memberAuthLevel);$(e).find("input[name=serviceCode]").val(f.serviceCode);$(e).find("input[name=domainResultCode]").val(f.returnCode);$(e).attr("action","/login/domainStop/view").submit()}else{if(f.returnCode==d._nReturnCodeDomainChangeName){window.location=f.redirectUrl}else{if(f.returnCode==d._nReturnCodeWaitPendingMember){var e=$("#waitPendingMember");$(e).find("input[name=domainId]").val(f.domainId);$(e).attr("action","/login/mWait").submit()}else{if(f.returnCode==d._nTwoStepLoginProgress){var e=$("#twoStepLogin");$(e).find("input[name=usage]").val(f.usage);$(e).find("input[name=redirectUrl]").val(f.redirectUrl);$(e).find("input[name=userIdNo]").val(f.userIdNo);$(e).find("input[name=domainId]").val(f.domainId);$(e).find("input[name=sessionKey]").val(f.sessionKey);$(e).attr("action",f.nextUrl).submit()}else{d._loginReady=true;if(f.captchaKey!=null&&f.captchaKey!=""){if($("#divCaptcha").css("display")=="none"){$("#div_fail_message").hide()}else{$("#div_fail_message").show().find("p").text(f.returnMessage)}d._captchaOn(f.captchaKey);$("#captchaValue").val("");d._changeDefaultMessageText(f.returnMessage)}else{if($("#divCaptcha").css("display")!="none"&&$("#captchaKey").val()!=""){d._setCaptchaImage($("#captchaKey").val());$("#captchaValue").val("");$("#div_fail_message").show().find("p").text(f.returnMessage)}else{$("#div_fail_message").show().find("p").text(f.returnMessage)}}}}}}}}}}},error:function(e,g,f){d._loginReady=true;if(e.status=="401"){d._changeDefaultMessageText(Message.ABUSER_LOGIN_FAIL);d._retryCount=0}else{if(d._retryCount<5){d._retryCount++;d._login()}else{d._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}}}})}catch(c){d._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);d._loginReady=true}},_captchaOn:function(a){$("#captchaKey").val(a);this._setCaptchaImage(a);$("#divLoginImage").hide();$(".captcha").show();$("#divCaptchaTitle").show()},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+Math.floor(Math.random()*1000)+1;$("#captchaImage").attr("src",a)},_findId:function(){location.href="/view/find/id?accessUrl="+$("#accessUrl").val()},_clearSavedId:function(){var a=this;$.get("/login/clearSavedId","",function(){window.location.href="/login/login?accessUrl="+$("#accessUrl").val()})},_lineLogin:function(){var g=this;document.domain="worksmobile.com";var m="";var f="";if(g._uaData.length>0||!!g._uaData.platform){try{m=encodeURIComponent('"'+g._uaData.platform+'";v="'+g._uaData.platformVersion+'"');if(navigator.userAgentData.brands){f=encodeURIComponent($.map(navigator.userAgentData.brands,function(e){return'"'+e.brand+'";v="'+e.version+'"'}).join(","))}else{f=encodeURIComponent($.map(navigator.userAgentData.uaList,function(e){return'"'+e.brand+'";v="'+e.version+'"'}).join(","))}}catch(h){}}var c=window.screenLeft?window.screenLeft:window.screenX;var b=window.screenTop?window.screenTop:window.screenY;var k=document.body.clientWidth;var j=document.body.clientHeight;var l=900;var i=730;var o=c+(k/2)-(l/2);var n=b+(j/2)-(i/2);var d="left="+o+"px, top="+n+"px, width="+l+"px, height="+i+"px,";d+="toolbar=no, menubar=no, location=no, scrollbars=yes, resizable=yes, status=no";var a="/login/snslogin/line?accessUrl="+$("#lineLogin").attr("data-accessUrl")+"&serviceCode="+this._webLoginServiceCode+"&clientHintOS="+m+"&clientHintBrowser="+f;window.open(a,"",d)},_browserCheck:function(){if(/(MSIE (9|8|7)|Trident\/(5|4|3))/.test((window.navigator||{}).userAgent)){$("#_ie_banner").show()}},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_selectLoginOption:function(a){this._setLoginType(a);if(a==="phone"){$("._phoneLoginSelected").show();$("._idLoginSelected").hide();$("._phoneLoginOption").addClass("selected");$("._idLoginOption").removeClass("selected");$(".inp").removeClass("failed");$("#div_fail_message").hide();$(".check_info").hide()}else{$(".form_cover").removeClass("failed");$("._idLoginSelected").show();$("._phoneLoginSelected").hide();$("._idLoginOption").addClass("selected");$("._phoneLoginOption").removeClass("selected");$("#div_phone_fail_message").hide();$(".check_info").show()}},_setLoginType:function(a){$("#nowLoginType").val(a)},_getLoginType:function(){return $("#nowLoginType").val().trim()}};MobileLogIn=function(){this.init.apply(this,arguments)};MobileLogIn.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_loginReady:true,_nTwoStepLoginProgress:1,_notFoundUser:2,_notMatchedIdc:3,_needCaptcha:4,_nReturnCodeExpiredPw:24,_nReturnCodeChangePwForFirstUser:25,_nReturnCodeWrongIDC:110,_nReturnCodeDomainStopStatus:76,_nReturnCodePendingDomainMember:72,_nReturnCodePendingDomainAdmin:75,_nReturnCodeDomainChangeName:141,_nReturnCodeWaitPendingMember:600,_nReturnCodeLoginRestrictedFromOtherDomain:55,_pcAppServiceCode:"one_pc",_driveAppServiceCode:"drive_client",_mobileAppServiceCode:"one_app",init:function(b,c,a){this._hideMessageAll(["_password","_captcha"]);$(".works_login").css("min-height",$(window).height()-70);$(window).resize(function(){$(".works_login").css("min-height",$(window).height()-70)});this._attachEvent();this.sNweEmail=b;this.sServiceCode=c;this.accessUrl=encodeURIComponent(location.href);this.mdmCode=this._getUrlParam("code");if(this.sNweEmail!=null&&this.sNweEmail!=""){this._setAutoInputId(this.sNweEmail)}$("#password").focus()},_attachEvent:function(){var a=this;$("#password").on("input",function(c){var b=$("#password").val();if(b.length==0){$("#_loginBtn").removeClass("active")}else{$("#_loginBtn").addClass("active")}if(b.length>a._MAX_PASSWORD_LENGTH){$("#password").val($("#password").val().substr(0,a._MAX_PASSWORD_LENGTH))}});if($("#inputId").val().length>0){$("#inputId").parent().children("label").addClass("blind")}if($("#password").val().length>0){$("#password").parent().children("label").addClass("blind")}$("#inputId, #password, #captchaValue").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$(".btn_masking").click(function(f){var d=$("#password");var g=d.attr("type");var c=g==="password"?"text":"password";d.attr("type",c);d.focus();var b=$(this);if(b.hasClass("checked")){b.removeClass("checked")}else{b.addClass("checked")}});$("#_loginBtn").click(function(){a._login()});$("#_pwFindBtn").click(function(){a._findPassword()});$("#_refreshCaptchaBtn").click(function(){a._hideMessage("_captcha");a._setCaptchaImage($("#captchaKey").val())});$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("#lineLogin").click(function(){a._lineLogin()});$(".inp input").focus(function(b){b.stopPropagation();$(this).parents(".inp").addClass("focus")}).focusout(function(b){b.stopPropagation();$(this).parents(".inp").removeClass("focus")})},_lineLogin:function(){var a=this;if(a.sServiceCode==a._mobileAppServiceCode){worksAuth.login("line");return}else{window.location="/login/snslogin/line?serviceCode="+a.sServiceCode+"&language="+$.cookie("language")}},_setAutoInputId:function(a){$("#inputId").focus();$("#inputId").val(a)},_login:function(){var d=this;try{if(this._loginReady==false){return}var a=this._convertToHalfWidth($.trim($("#inputId").val()));var b=this._convertToHalfWidth($.trim($("#password").val()));if(this._inputValidCheck(a,b)==false){return}this._loginReady=false;$("._login").hide();$.ajax({url:"/mobile/loginProcess",type:"POST",async:false,dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:a,password:b,serviceCode:d.sServiceCode,accessUrl:d.accessUrl,emailFromClient:d.sNweEmail,captchaKey:$("#captchaKey").val(),captchaValue:$("#captchaValue").val(),mdmCode:d.mdmCode}),success:function(f){if(f.returnCode==0){window.location="/login/mSuccess?userIdNo="+f.userIdNo+"&domainId="+f.domainId+"&tenantId="+f.tenantId+"&email="+f.email}else{if(f.returnCode==20&&f.captchaKey!=null&&f.captchaKey!=""){d._loginReady=true;if($("#divCaptcha").css("display")!="none"){d._showMessage(f.returnMessage,"_password")}d._captchaOn(f.captchaKey)}else{if(f.returnCode==d._nReturnCodeExpiredPw){var e=$("#changePasswordForm");$(e).find("input[name=tenantId]").val(f.tenantId);$(e).find("input[name=domainId]").val(f.domainId);$(e).find("input[name=userIdNo]").val(f.userIdNo);$(e).find("input[name=accessUrl]").val(f.accessUrl);$(e).find("input[name=token]").val(f.sessionKey);$(e).find("input[name=keepLoginYn]").val(f.keepLoginYn);$(e).find("input[name=serviceCode]").val(f.serviceCode);$(e).find("input[name=usage]").val("expiredPassword");$(e).attr("action","/integrate/password/change/expired").submit()}else{if(f.returnCode==d._nReturnCodeChangePwForFirstUser){var e=$("#changePasswordFormForFirstMember");$(e).find("input[name=id]").val(a);$(e).find("input[name=tenantId]").val(f.tenantId);$(e).find("input[name=accessUrl]").val(f.accessUrl);$(e).find("input[name=token]").val(f.token);$(e).find("input[name=from]").val(f.from);$(e).attr("action","/password/change/first").submit()}else{if(f.returnCode==d._nReturnCodeWrongIDC){d._loginReady=true;d._login()}else{if(f.returnCode==d._nReturnCodeDomainStopStatus||f.returnCode==d._nReturnCodePendingDomainMember||f.returnCode==d._nReturnCodePendingDomainAdmin){var e=$("#domainStopStatusView");$(e).find("input[name=email]").val(f.email);$(e).find("input[name=memberAuthLevel]").val(f.memberAuthLevel);$(e).find("input[name=serviceCode]").val(f.serviceCode);$(e).find("input[name=domainResultCode]").val(f.returnCode);$(e).attr("action","/login/domainStop/view").submit()}else{if(f.returnCode==d._nReturnCodeDomainChangeName){window.location=f.redirectUrl}else{if(f.returnCode==d._nReturnCodeWaitPendingMember){var e=$("#waitPendingMember");$(e).find("input[name=email]").val(f.email);$(e).find("input[name=domainId]").val(f.domainId);$(e).find("input[name=tenantId]").val(f.tenantId);$(e).find("input[name=userIdNo]").val(f.userIdNo);$(e).find("input[name=userIp]").val(f.userIp);$(e).attr("action","/login/mWait").submit()}else{if(f.returnCode==120){d._loginReady=true;window.location=f.returnUrl}else{if(f.returnCode==d._nReturnCodeLoginRestrictedFromOtherDomain){var e=$("#mFail");$(e).find("input[name=message]").val(f.returnMessageId);$(e).attr("action","/login/mFail").submit()}else{if(f.returnCode==d._nTwoStepLoginProgress){var e=$("#twoStepLogin");$(e).find("input[name=usage]").val(f.usage);$(e).find("input[name=redirectUrl]").val(f.redirectUrl);$(e).find("input[name=userIdNo]").val(f.userIdNo);$(e).find("input[name=domainId]").val(f.domainId);$(e).find("input[name=sessionKey]").val(f.sessionKey);$(e).attr("action",f.nextUrl).submit()}else{d._loginReady=true;d._showMessage(f.returnMessage,"_password");$("._login").show()}}}}}}}}}}}},error:function(e,g,f){d._loginReady=true;if(e.status=="401"){d._showMessage(Message.ABUSER_LOGIN_FAIL,"_password")}else{d._showMessage(Message.DEFAULT_ERROR_MESSAGE,"_password")}}})}catch(c){d._showMessage(Message.DEFAULT_ERROR_MESSAGE,"_password")}finally{d._loginReady=true;$("._login").show()}},_inputValidCheck:function(e,b){var a=$("#inputId");var d=$("#password");var e=e?e:$.trim($("#inputId").val());var b=b?b:$.trim($("#password").val());if(e==""){this._showMessage(Message.MOBILE_LOGIN_1,"_id");$(a).focus();return false}this._hideMessage("_id");if(b==""){this._showMessage(Message.MOBILE_LOGIN_2,"_password");$(d).focus();return false}this._hideMessage("_password");if($("#divCaptcha").css("display")!="none"&&$("#captchaValue").val().length==0){var c=Message.MOBILE_LOGIN_3;this._showMessage(c,"_captcha");$("#captchaValue").focus();return false}this._hideMessage("_captcha");for(var f=0;f<e.length;f++){if(e.charAt(f)==" "){this._showMessage(Message.MOBILE_LOGIN_4,"_password");return false}}this._hideMessage("_password");return true},_showMessage:function(c,b){$("._availWrong").removeClass("wrong");var a='<p class="alert _message">'+c+"</p>";if($("._message").length>0){$("._message").remove()}$("."+b).addClass("wrong");$("."+b).after(a)},_hideMessage:function(a){$("."+a).removeClass("wrong");$("."+a).next("._message").remove()},_hideMessageAll:function(a){for(var b=0;b<a.length;b++){$("."+a[b]).removeClass("wrong")}$("._message").remove()},_captchaOn:function(a){$("#captchaKey").val(a);$("#captchaValue").val("");$("#captchaMessage").show();this._setCaptchaImage(a);$("#divCaptcha").show()},_findPassword:function(){location.href="/view/find/password?customDomain="+this.sCustomDomain+"&serviceId="+this.sServiceCode+"&accessUrl="+encodeURIComponent(location.href)},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+Math.floor(Math.random()*1000)+1;$("#captchaImage").attr("src",a)},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_getUrlParam:function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);if(b==null){return null}else{return decodeURI(b[1])||0}}};PhoneLogin=function(){this.init.apply(this,arguments)};PhoneLogin.prototype={_loginReady:true,_retryCount:0,_bIsMobile:false,_sServiceCode:"",_aEventQueue:new Array(),LEFT_ARROW_KEY:37,RIGHT_ARROW_KEY:39,UP_ARROW_KEY:38,DOWN_ARROW_KEY:40,BACKSPACE_KEY:8,ENTER_KEY_CODE:13,_SELECTED_TYPE_KEY:"selectedLoginType",_SELECTED_COUNTRY_CODE:"selectedCountryCode",_nTwoStepLoginProgress:1,_nReturnCodeExpiredPw:24,_nReturnCodeChangePwForFirstUser:25,_nReturnCodeWrongIDC:110,_nReturnCodeDomainStopStatus:76,_nReturnCodePendingDomainMember:72,_nReturnCodePendingDomainAdmin:75,_nReturnCodeDomainChangeName:141,_nReturnCodeWaitPendingMember:600,_nReturnCodeLoginRestrictedFromOtherDomain:55,_nReturnCodeServiceNoAuth:54,_nReturnCodeNotConnectedPhone:30,_nReturnCodeDomainNotUsePhoneLogin:31,_nReturnCodeResignUser:64,_nReturnCodeStopUser:65,init:function(b,a){this._bIsMobile=b==="true";this._sServiceCode=a;this._attachment();var d=this;if(sessionStorage.getItem(this._SELECTED_TYPE_KEY)==="phone"){$("._phoneLoginOption").click()}if(sessionStorage.getItem(this._SELECTED_COUNTRY_CODE)!=null&&sessionStorage.getItem(this._SELECTED_COUNTRY_CODE)!==""){var c=sessionStorage.getItem(this._SELECTED_COUNTRY_CODE);if(c!=null&&c!==""){c=c.replace(/\+/g,"");setTimeout(function(){$("._currentSelectedCountry").html(d.getCountryName($("#"+c)))},100)}}},_attachment:function(){var a=this;$("#loginStart").click(function(){if(a._getLoginType()==="phone"&&a._validPhoneNo()){a._phoneCheck()}});$("._phoneNo").keydown(function(b){if(b.keyCode==a.ENTER_KEY_CODE&&a._getLoginType()==="phone"&&a._validPhoneNo()){a._phoneCheck()}});$("._phoneNo").on("input",function(b){if($(this).val()!=null&&$(this).val()!==""){$(".form_cover").removeClass("failed");a._hideOtherLoginFailMessage("div_phone_fail_message")}});$("._authNo").on("input",function(b){a._setCopyValue($(b.target))});$("._authNo").on("paste",function(b){a._pasteCatch(b)});$("._authNo").keydown(function(b){a._keydownProcess(b)});$("._authNo").on("keyup",function(b){a._checkAuthNo(b)});$("#resend,._sendSms,._sendMessage").click(function(b){a._sendAuthNo($(b.target))});$("._goToMobileStep1").click(function(){worksAuth.loginOtherMethod()});$("#countryCode").change(function(b){$("._currentSelectedCountry").html(a.getCountryName($("#countryCode option:selected")))});$("._authNoP input").focus(function(b){b.stopPropagation();$(this).parents(".inp").addClass("focus")}).focusout(function(b){b.stopPropagation();if($(this).val()===""){$(this).parents(".inp").removeClass("focus")}});$("._authNoDiv input").focus(function(b){b.stopPropagation();$(this).addClass("focus")}).focusout(function(b){b.stopPropagation();$(this).removeClass("focus")}).change(function(b){var c=$(this);if(c.val()){c.addClass("writing")}else{c.removeClass("writing")}})},_setCopyValue:function(a){if(oNweCommonUtils.isMsBrowser()){return}var g=this;var c=a.val();if(c.length<2){return}a.val("");var f=parseInt(a.attr("data-no"));c=c.substr(0,4);var d=0;for(var e=f;e<c.length+f;e++){$("._authNo"+e).val(c.slice(d,++d));if(g._bIsMobile===false){g._addInputHighlight($("._authNo"+e))}else{g._addInputHighlight($("._authNo"+e).parents("p"))}}if(c.length<4){$("._authNo"+(c.length+1)).focus()}this._hideFailElement();var b=g._makeAuthNo();if(b.length<4){return}if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}},_pasteCatch:function(f){if(oNweCommonUtils.isMsBrowser()==false){return}var j=f.originalEvent.clipboardData||window.clipboardData;if(j==null){return}var g=j.getData("Text");if(g===""||g==null){return}if(isNaN(this._convertToHalfWidth(g))){return}var b=parseInt($(f.target).attr("data-no"));var c=0;for(var d=b;d<g.length+b;d++){$("._authNo"+d).val(g.slice(c,++c));if(this._bIsMobile===false){this._addInputHighlight($("._authNo"+d))}else{this._addInputHighlight($("._authNo"+d).parents("p"))}if(d===4){break}}this._hideFailElement();var a=this._makeAuthNo();if(a.length<4){f.preventDefault();return}var h=this;if(this._pushQueue(a)){setTimeout(function(){h._processQueue()},200)}},_hideFailElement:function(){this._hideOtherLoginFailMessage("div_other_message");$(".cert_box").removeClass("failed");this._hideResendMessage()},_phoneCheck:function(){var c=this;if(this._loginReady==false){return}var a=this._convertToHalfWidth($.trim($("._phoneNo").val())).replace(/\s/g,"");if(a.length>24){c._showPart1FailMessage("invalid");return}else{$(".form_cover").removeClass("failed");$("#div_phone_fail_message").hide()}a=a.replace(/^\s+|\s+$/g,"");var b=c._getPhoneNoWithCountryCode(a);try{$.ajax({type:"post",url:"/otherLogin/phoneCheck",async:false,data:{phoneNo:b},success:function(d){if(d.returnCode==="00"){var g=window.location.href;if(g.substr(g.length-1,g.length)==="#"){g=g.substr(0,g.length-1)}var f=["loginType","userId"];var e=["phone",b];sessionStorage.setItem(c._SELECTED_TYPE_KEY,"phone");sessionStorage.setItem(c._SELECTED_COUNTRY_CODE,$("#countryCode option:selected").val());c._submitPostForm(g,f,e)}else{if(d.returnCode==c._nReturnCodeWrongIDC){if(c._retryCount==0){c._retryCount++;c._phoneCheck()}else{c._showPart1FailMessage("invalid");c._retryCount=0}}else{if(d.returnCode==="11"){c._showPart1FailMessage("notUse")}else{c._showPart1FailMessage("invalid")}}}}})}finally{c._loginReady=true}},_getPhoneNoWithCountryCode:function(b){var a=$("#countryCode option:selected").val();return a+" "+b},_showPart1FailMessage:function(a){if(a==="notUse"){$("#div_phone_fail_message").find("p").html($("._cantUserMessage").val())}else{$("#div_phone_fail_message").find("p").html($("._invalidMessage").val())}$(".form_cover").addClass("failed");$("#div_phone_fail_message").show()},_submitPostForm:function(e,f,c){if(e===""||e===undefined){return}if(f==null||c==null){return}var d=document.createElement("form");d.setAttribute("charset","UTF-8");d.setAttribute("method","post");d.setAttribute("action",e);for(var b=0;b<f.length;b++){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("name",f[b]);a.setAttribute("value",c[b]);d.appendChild(a);document.body.appendChild(d)}d.submit()},_validPhoneNo:function(){var b=new RegExp("[^0-9|-]");var a=this._convertToHalfWidth($("._phoneNo").val());a=a.replace(/^\s+|\s+$/g,"");if(a==null||a==""){this._showPart1FailMessage("invalid");$("._phoneNo").focus();return false}if(b.test(a)){this._showPart1FailMessage("invalid");return false}if(a.length>24){this._showPart1FailMessage("invalid");return false}return true},_requestAuthNoCheck:function(a){var c=this;var b="/otherLogin/message/verify";if($("._authNoType").val()==="sms"){b="/otherLogin/beforeLogin/sms/verify"}$("._authNo").prop("disabled",true);$.ajax({type:"post",async:false,url:b,data:{phoneNo:$("._requestId").val(),sessionKey:$("._authNoSessionKey").val(),authNo:a},success:function(d){$("._authNo").prop("disabled",false);if(d.returnCode==="00"){c._doOtherLogin("phone")}else{c._setOtherLoginFailMessage("div_other_message",d.returnMessage);$(".cert_box").addClass("failed");$("._authNo").val("");$("._authNo1").focus();c._removeInputHighlight()}}})},_setOtherLoginFailMessage:function(b,a){if(this._bIsMobile){$("#"+b).html(a)}else{$("#"+b).find("._failMessage").html(a);$("._failMessage").show()}$("#"+b).show()},_hideOtherLoginFailMessage:function(a){$("#"+a).hide()},_checkAuthNo:function(f){var h=this;var a=$(f.target);var d=parseInt(a.attr("data-no"));if(f.keyCode===this.LEFT_ARROW_KEY){if(d===1){return}this._selectOrFocus($("._authNo"+(d-1)));return}else{if(f.keyCode===this.RIGHT_ARROW_KEY){if(d===4){return}this._selectOrFocus($("._authNo"+(d+1)));return}else{if(f.keyCode===this.UP_ARROW_KEY||f.keyCode===this.DOWN_ARROW_KEY){return}else{if(f.keyCode===this.BACKSPACE_KEY){this._selectOrFocus($("._authNo"+(d-1)))}}}}var g=a.val().trim();if(g==null||g===""){a.val("");return}this._hideOtherLoginFailMessage("div_other_message");$(".cert_box").removeClass("failed");this._hideResendMessage();var c=this._convertToHalfWidth(a.val());if(isNaN(c)){a.val("");return}$("._authNo").each(function(){$(this).attr("readonly",false)});var b=this._makeAuthNo();if(b.length===4){if(this._pushQueue(b)){setTimeout(function(){h._processQueue()},200)}}else{if(a.attr("data-no")==="1"){a.focus()}this._nextAuthNo(a)}},_selectOrFocus:function(a){if(a.val()==null||a.val()===""){a.focus();a.attr("data-selected","n")}else{a.select();a.attr("data-selected","y")}},_nextAuthNo:function(b){var a=b.attr("data-no");b.attr("data-selected","n");$("._authNo").each(function(){if(parseInt($(this).attr("data-no"))===parseInt(a)+1){if($(this).val()!==""){$(this).select()}else{$(this).focus()}return false}})},_lengthCheck:function(a){if(a.attr("data-no")==="4"&&a.val().length>=1){a.attr("readonly",true)}if(a.val().length>=1){if(a.attr("data-selected")==="y"){a.attr("data-selected","n");return}this._nextAuthNo(a)}},_keydownProcess:function(b){var a=$(b.target);if(b.keyCode===this.LEFT_ARROW_KEY||b.keyCode===this.RIGHT_ARROW_KEY||b.keyCode===this.UP_ARROW_KEY||b.keyCode===this.DOWN_ARROW_KEY||b.keyCode===this.BACKSPACE_KEY){return}else{this._lengthCheck(a)}},_makeAuthNo:function(){var a="";$("._authNo").each(function(){a+=$(this).val()});if(a.length<4){return a}return this._convertToHalfWidth(a)},_doOtherLogin:function(d){var c=this;try{var a=this._convertToHalfWidth($.trim($("._requestId").val()));$.ajax({url:"/otherLogin/"+d+"/loginProcess",type:"post",async:false,dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),otherLoginId:a,fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val(),serviceCode:c._sServiceCode}),success:function(e){c._bIsMobile?c._mobileProcess(d,e):c._webProcess(d,e)},error:function(e,g,f){c._loginReady=true;if(e.status=="401"){c._setOtherLoginFailMessage("div_other_message",Message.ABUSER_LOGIN_FAIL);c._retryCount=0}else{if(c._retryCount<5){c._retryCount++;c._doOtherLogin(d)}else{c._setOtherLoginFailMessage("div_other_message",Message.DEFAULT_ERROR_MESSAGE);c._retryCount=0}}}})}catch(b){c._setOtherLoginFailMessage("div_other_message",Message.DEFAULT_ERROR_MESSAGE);c._loginReady=true}},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_webProcess:function(c,b){if(b.returnCode==0){sessionStorage.removeItem(this._SELECTED_TYPE_KEY);window.location=b.accessUrl}else{this._removeInputHighlight();if(b.returnCode==this._nReturnCodeWrongIDC){this._loginReady=true;if(this._retryCount==0){this._retryCount++;this._doOtherLogin(c)}else{this._setOtherLoginFailMessage("div_other_message",Message.DEFAULT_ERROR_MESSAGE);this._retryCount=0}}else{if(b.returnCode==this._nReturnCodeExpiredPw){var a=$("#changePasswordForm");$(a).find("input[name=tenantId]").val(b.tenantId);$(a).find("input[name=domainId]").val(b.domainId);$(a).find("input[name=userIdNo]").val(b.userIdNo);$(a).find("input[name=accessUrl]").val(b.accessUrl);$(a).find("input[name=token]").val(b.sessionKey);$(a).find("input[name=keepLoginYn]").val(b.keepLoginYn);$(a).find("input[name=serviceCode]").val(b.serviceCode);$(a).find("input[name=usage]").val("expiredPassword");if(c=="phone"){$(a).find("input[name=isPhoneLogin]").val(true)}$(a).attr("action","/integrate/password/change/expired").submit()}else{if(b.returnCode==this._nReturnCodeChangePwForFirstUser){var a=$("#changePasswordFormForFirstMember");$(a).find("input[name=id]").val(b.id);$(a).find("input[name=tenantId]").val(b.tenantId);$(a).find("input[name=accessUrl]").val(b.accessUrl);$(a).find("input[name=token]").val(b.token);$(a).find("input[name=from]").val(b.from);$(a).attr("action","/password/change/first").submit()}else{if(b.returnCode==this._nReturnCodeDomainStopStatus||b.returnCode==this._nReturnCodePendingDomainMember||b.returnCode==this._nReturnCodePendingDomainAdmin){var a=$("#domainStopStatusView");$(a).find("input[name=email]").val(b.email);$(a).find("input[name=memberAuthLevel]").val(b.memberAuthLevel);$(a).find("input[name=serviceCode]").val(b.serviceCode);$(a).find("input[name=domainResultCode]").val(b.returnCode);$(a).attr("action","/login/domainStop/view").submit()}else{if(b.returnCode==this._nReturnCodeDomainChangeName){window.location=b.redirectUrl}else{if(b.returnCode==this._nReturnCodeWaitPendingMember){var a=$("#waitPendingMember");$(a).find("input[name=domainId]").val(b.domainId);$(a).attr("action","/login/mWait").submit()}else{if(b.returnCode==this._nReturnCodeNotConnectedPhone||b.returnCode==this._nReturnCodeDomainNotUsePhoneLogin||b.returnCode==this._nReturnCodeResignUser||b.returnCode==this._nReturnCodeStopUser){this._setOtherLoginFailMessage("div_other_message",b.returnMessage);$(".cert_box").addClass("failed")}else{if(b.returnCode==this._nTwoStepLoginProgress){var a=$("#twoStepLogin");$(a).find("input[name=usage]").val(b.usage);$(a).find("input[name=redirectUrl]").val(b.redirectUrl);$(a).find("input[name=userIdNo]").val(b.userIdNo);$(a).find("input[name=domainId]").val(b.domainId);$(a).find("input[name=sessionKey]").val(b.sessionKey);if(c=="phone"){$(a).find("input[name=isPhoneLogin]").val(true)}$(a).attr("action",b.nextUrl).submit()}else{this._setOtherLoginFailMessage("div_other_message",Message.DEFAULT_ERROR_MESSAGE);$(".cert_box").addClass("failed")}}}}}}}}}},_mobileProcess:function(c,b){this._removeInputHighlight();if(b.returnCode==0){window.location="/login/mSuccess?userIdNo="+b.userIdNo+"&domainId="+b.domainId+"&tenantId="+b.tenantId+"&email="+b.email}else{if(b.returnCode==this._nReturnCodeExpiredPw){var a=$("#changePasswordForm");$(a).find("input[name=tenantId]").val(b.tenantId);$(a).find("input[name=domainId]").val(b.domainId);$(a).find("input[name=userIdNo]").val(b.userIdNo);$(a).find("input[name=accessUrl]").val(b.mobileLoginPart2Url);$(a).find("input[name=token]").val(b.sessionKey);$(a).find("input[name=keepLoginYn]").val(b.keepLoginYn);$(a).find("input[name=serviceCode]").val(b.serviceCode);$(a).find("input[name=usage]").val("expiredPassword");$(a).attr("action","/integrate/password/change/expired").submit()}else{if(b.returnCode==this._nReturnCodeChangePwForFirstUser){var a=$("#changePasswordFormForFirstMember");$(a).find("input[name=id]").val(b.id);$(a).find("input[name=tenantId]").val(b.tenantId);$(a).find("input[name=accessUrl]").val(b.mobileLoginPart2Url);$(a).find("input[name=token]").val(b.token);$(a).find("input[name=from]").val(b.from);$(a).attr("action","/password/change/first").submit()}else{if(b.returnCode==this._nReturnCodeWrongIDC){this._loginReady=true;this._doOtherLogin(c)}else{if(b.returnCode==this._nReturnCodeDomainStopStatus||b.returnCode==this._nReturnCodePendingDomainMember||b.returnCode==this._nReturnCodePendingDomainAdmin){var a=$("#domainStopStatusView");$(a).find("input[name=email]").val(b.email);$(a).find("input[name=memberAuthLevel]").val(b.memberAuthLevel);$(a).find("input[name=serviceCode]").val(b.serviceCode);$(a).find("input[name=domainResultCode]").val(b.returnCode);$(a).attr("action","/login/domainStop/view").submit()}else{if(b.returnCode==this._nReturnCodeDomainChangeName){window.location=b.redirectUrl}else{if(b.returnCode==this._nReturnCodeWaitPendingMember){var a=$("#waitPendingMember");$(a).find("input[name=email]").val(b.email);$(a).find("input[name=domainId]").val(b.domainId);$(a).find("input[name=tenantId]").val(b.tenantId);$(a).find("input[name=userIdNo]").val(b.userIdNo);$(a).find("input[name=userIp]").val(b.userIp);$(a).attr("action","/login/mWait").submit()}else{if(b.returnCode==this._nReturnCodeLoginRestrictedFromOtherDomain){var a=$("#mFail");$(a).find("input[name=message]").val(b.returnMessageId);$(a).attr("action","/login/mFail").submit()}else{if(b.returnCode==this._nReturnCodeServiceNoAuth||b.returnCode==this._nReturnCodeNotConnectedPhone||b.returnCode==this._nReturnCodeDomainNotUsePhoneLogin||b.returnCode==this._nReturnCodeResignUser||b.returnCode==this._nReturnCodeStopUser){this._setOtherLoginFailMessage("div_other_message",b.returnMessage);$(".cert_box").addClass("failed")}else{if(b.returnCode==this._nTwoStepLoginProgress){var a=$("#twoStepLogin");$(a).find("input[name=usage]").val(b.usage);$(a).find("input[name=redirectUrl]").val(b.redirectUrl);$(a).find("input[name=userIdNo]").val(b.userIdNo);$(a).find("input[name=domainId]").val(b.domainId);$(a).find("input[name=sessionKey]").val(b.sessionKey);if(c=="phone"){$(a).find("input[name=isPhoneLogin]").val(true)}$(a).attr("action",b.nextUrl).submit()}else{this._loginReady=true;this._setOtherLoginFailMessage("div_other_message",b.returnMessage);$(".cert_box").addClass("failed")}}}}}}}}}}},_sendAuthNo:function(a){var d=a.attr("data-authNoType");var c=this;this._hideOtherLoginFailMessage("div_other_message");$(".cert_box").removeClass("failed");this._removeInputHighlight();this._hideResendMessage();var b="";if(d==="sms"){b="/otherLogin/beforeLogin/sms/send"}else{b="/otherLogin/message/send"}$.ajax({url:b,type:"post",async:false,data:{phoneNo:$("._requestId").val(),serviceCode:c._sServiceCode},success:function(e){if(e.returnCode==="00"){if(a.hasClass("_resend")){c._showResendMessage()}$("._authNoSessionKey").val(e.data);$("._authNo").val("");$("._authNoType").val(d);$("#resend").attr("data-authNoType",d);if(d==="sms"){$(".user").html($("._requestId").val());$("._smsDesc").show();$("._messageDesc").hide();if(c._sServiceCode!=="one_app"){$("._sendMessageSpan").show();$("._sendSmsSpan").hide();$("._sendMessageLink").show();$("._sendSmsLink").hide()}}else{$(".user").html($("._requestEmail").val());$("._messageDesc").show();$("._smsDesc").hide();if(c._sServiceCode!=="one_app"){$("._sendMessageSpan").hide();$("._sendSmsSpan").show()}else{$("._sendMessageSpan").hide();$("._resendSpan").show();$("._sendMessageSpan").before($("._resendSpan"))}}}else{alert(e.returnMessage);if(c._sServiceCode==="one_app"){$("._sendMessageSpan").show();$("._resendSpan").before($("._sendMessageSpan"));$("._resendSpan").hide();c._hideResendMessage()}}}})},_getLoginType:function(){return $("#nowLoginType").val().trim()},_showResendMessage:function(){if(this._bIsMobile===false){$("#div_other_message").show();$("._failMessage").hide()}else{$("#div_other_fail_message").hide()}$("._resendMessage").show()},_hideResendMessage:function(){if(this._bIsMobile===false){$("#div_other_message").hide()}$("._resendMessage").hide()},_removeInputHighlight:function(){$("._authNo").removeClass("writing");$("._authNo").removeClass("focus");$("._authNoP").removeClass("focus")},_addInputHighlight:function(a){a.addClass("focus");if(this._bIsMobile===false){if(a.val()!==""){a.addClass("writing")}}},_pushQueue:function(a){if(this._aEventQueue.length===0){this._aEventQueue.push(a);return true}return false},_processQueue:function(){this._requestAuthNoCheck(this._aEventQueue.shift())},getCountryName:function(a){var b=$.trim(a.html());try{return b.split("+")[0]}catch(c){return b}}};PasswordChange=function(){this.init.apply(this,arguments)};PasswordChange.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_ajaxReady:true,_RESULT_CODE_TOKEN_EXPIRED:320,_nReturnCodeDomainChangeName:141,_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(b,a,c){this._bUsingToken=b;this._oTenantConfig=a;this._fromAuthMail=c;this._attachEvent();this._setFingerPrint();$("#newPassword").focus();this._passwordSafetyTooltip=new PasswordSafetyTooltip("#newPassword",{levelUrl:"/passwordGrade/getLevel",tooltipSelector:"#passwordTooltipDiv",templateUrl:"/templates/passwordSafetyTooltip.ejs",hidPasswordSecurityLevelSelector:"#hidPasswordSecurityLevel",tenantId:this._oTenantConfig.tenantId,domainId:this._oTenantConfig.domainId,minLength:this._oTenantConfig.passwordMinLength,passwordDifficultyType:this._oTenantConfig.passwordDifficultyType})},_attachEvent:function(){var a=this;$("#newPassword").on("input",function(c){var b=$("#newPassword").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#newPassword").val($("#newPassword").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#newPassword2").on("input",function(c){var b=$("#newPassword2").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#newPassword2").val($("#newPassword2").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#newPassword2").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){if(a._bUsingToken){a._changePasswordByToken()}else{a._changePasswordForFirst()}}});$("#_changePasswordBtn").click(function(){if(a._bUsingToken){a._changePasswordByToken()}else{a._changePasswordForFirst()}})},_validCheckPassword:function(){var b=$.trim($("#newPassword").val());var c=$.trim($("#newPassword2").val());if(b==""){alert(Message.PASSWORD_CHANGE_1);$("#newPassword").focus();return false}if(c==""){alert(Message.PASSWORD_CHANGE_2);$("#newPassword2").focus();return false}if(b!=c){alert(Message.PASSWORD_CHANGE_3);return false}if(b==c&&c.length>this._MAX_PASSWORD_LENGTH){alert(Message.PASSWORD_CHANGE_4);return false}var a=this._oTenantConfig.passwordDifficultyType;var d=$("#hidPasswordSecurityLevel").val();if(d==""||d<=1){if(this._passwordSafetyTooltip.isRepeateChar()){alert(Message.PASSWORD_CHANGE_5);$("#newPassword").focus();return false}if(a=="1"){alert(Message.replaceParam(Message.PASSWORD_CHANGE_6,this._oTenantConfig.passwordMinLength))}else{alert(Message.replaceParam(Message.PASSWORD_CHANGE_7,this._oTenantConfig.passwordMinLength))}$("#newPassword").focus();return false}return true},_changePasswordForFirst:function(){if(this._ajaxReady==false){return}var a=$("#id").val();if(!this._validCheckPassword()){return}this._ajaxReady=false;var b=this;$.post("/password/change/first/do",{encodedPassword:Base64.encode($("#newPassword").val()),token:$("#token").val(),from:$("#from").val(),id:a,accessUrl:$("#accessUrl").val(),tenantId:b._oTenantConfig.tenantId},function(c){b._ajaxReady=true;if(c.returnCode==b._nReturnCodeDomainChangeName){location.href=c.redirectUrl;return}alert(c.message);if(c.code=="00"){location.href=c.accessUrl}else{if(c.code=="34"){location.href="/"}}})},_changePasswordByToken:function(){var b=this;if(!this._ajaxReady){return}var a=$("#id").val();if(!this._validCheckPassword()){return}this._ajaxReady=false;$.post("/password/passwordChangeByToken",{encnm:"",encpw:$("#newPassword").val(),token:$("#token").val(),id:a,passwordReuseDenyCount:b._oTenantConfig.passwordReuseDenyCount,tenantId:b._oTenantConfig.tenantId,fromAuthMail:b._fromAuthMail,redirectUrl:$("#redirectUrl").val(),fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val()},function(c){b._ajaxReady=true;if(c.returnCode==b._nReturnCodeDomainChangeName){location.href=c.redirectUrl;return}alert(c.returnMessage);if(c.returnCode==0||c.returnCode==b._RESULT_CODE_TOKEN_EXPIRED){if(b._fromAuthMail==true){document.getElementById("frm1").submit()}else{location.href=$("#accessUrl").val()}}})},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)}};var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}return Base64._utf8_decode(a)},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};CapsLockHelper=function(){this.init.apply(this,arguments)};CapsLockHelper.prototype={_oCurrentInstance:null,_welTextForm:null,_bCapsLockIsOn:false,EVENT_TYPE:{CAPSLOCK_ON:"capsLockOn",CAPSLOCK_OFF:"capsLockOff"},init:function(a){this._oCurrentInstance=$(this);this._welTextForm=$(a);this._bindEvents()},_bindEvents:function(){this._welTextForm.on({keydown:$.proxy(this._capsLockIsOff,this),keyup:$.proxy(this._capsLockIsOff,this),keypress:$.proxy(this._capsLockIsOn,this)})},on:function(){this._oCurrentInstance.on.apply(this._oCurrentInstance,arguments)},off:function(){this._oCurrentInstance.off.apply(this._oCurrentInstance,arguments)},getStatus:function(){return this._bCapsLockIsOn},setStatus:function(a){this._bCapsLockIsOn=a},_capsLockIsOn:function(a){var b=false;if(!this.getStatus()){b=a.shiftKey?a.shiftKey:!!(a.modifiers&4);if(((a.which>=65&&a.which<=90)&&!b)||((a.which>=97&&a.which<=122)&&b)){this.setStatus(true);this._oCurrentInstance.trigger(this.EVENT_TYPE.CAPSLOCK_ON,[a])}}},_capsLockIsOff:function(a){if(a.keyCode===20&&this.getStatus()){this.setStatus(false);this._oCurrentInstance.trigger(this.EVENT_TYPE.CAPSLOCK_OFF,[a])}}};(function(){var rsplit=function(string,regex){var result=regex.exec(string),retArr=new Array(),first_idx,last_idx,first_bit;while(result!=null){first_idx=result.index;last_idx=regex.lastIndex;if((first_idx)!=0){first_bit=string.substring(0,first_idx);retArr.push(string.substring(0,first_idx));string=string.slice(first_idx)}retArr.push(result[0]);string=string.slice(result[0].length);result=regex.exec(string)}if(!string==""){retArr.push(string)}return retArr},chop=function(string){return string.substr(0,string.length-1)},extend=function(d,s){for(var n in s){if(s.hasOwnProperty(n)){d[n]=s[n]}}};EJS=function(options){options=typeof options=="string"?{view:options}:options;this.set_options(options);if(options.precompiled){this.template={};this.template.process=options.precompiled;EJS.update(this.name,this);return}if(options.element){if(typeof options.element=="string"){var name=options.element;options.element=document.getElementById(options.element);if(options.element==null){throw name+"does not exist!"}}if(options.element.value){this.text=options.element.value}else{this.text=options.element.innerHTML}this.name=options.element.id;this.type="["}else{if(options.url){options.url=EJS.endExt(options.url,this.extMatch);this.name=this.name?this.name:options.url;var url=options.url;var template=EJS.get(this.name,this.cache);if(template){return template}if(template==EJS.INVALID_PATH){return null}try{this.text=EJS.request(url+(this.cache?"":"?"+Math.random()))}catch(e){}if(this.text==null){throw ({type:"EJS",message:"There is no template at "+url})}}}var template=new EJS.Compiler(this.text,this.type);template.compile(options,this.name);EJS.update(this.name,this);this.template=template};EJS.prototype={render:function(object,extra_helpers){object=object||{};this._extra_helpers=extra_helpers;var v=new EJS.Helpers(object,extra_helpers||{});return this.template.process.call(object,object,v)},update:function(element,options){if(typeof element=="string"){element=document.getElementById(element)}if(options==null){_template=this;return function(object){EJS.prototype.update.call(_template,element,object)}}if(typeof options=="string"){params={};params.url=options;_template=this;params.onComplete=function(request){var object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)};EJS.ajax_request(params)}else{element.innerHTML=this.render(options)}},out:function(){return this.template.out},set_options:function(options){this.type=options.type||EJS.type;this.cache=options.cache!=null?options.cache:EJS.cache;this.text=options.text||null;this.name=options.name||null;this.ext=options.ext||EJS.ext;this.extMatch=new RegExp(this.ext.replace(/\./,"."))}};EJS.endExt=function(path,match){if(!path){return null}match.lastIndex=0;return path+(match.test(path)?"":this.ext)};EJS.Scanner=function(source,left,right){extend(this,{left_delimiter:left+"%",right_delimiter:"%"+right,double_left:left+"%%",double_right:"%%"+right,left_equal:left+"%=",left_comment:left+"%#"});this.SplitRegexp=left=="["?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)");this.source=source;this.stag=null;this.lines=0};EJS.Scanner.to_text=function(input){if(input==null||input===undefined){return""}if(input instanceof Date){return input.toDateString()}if(input.toString){return input.toString()}return""};EJS.Scanner.prototype={scan:function(block){scanline=this.scanline;regex=this.SplitRegexp;if(!this.source==""){var source_split=rsplit(this.source,/\n/);for(var i=0;i<source_split.length;i++){var item=source_split[i];this.scanline(item,regex,block)}}},scanline:function(line,regex,block){this.lines++;var line_split=rsplit(line,regex);for(var i=0;i<line_split.length;i++){var token=line_split[i];if(token!=null){try{block(token,this)}catch(e){throw {type:"EJS.Scanner",line:this.lines}}}}}};EJS.Buffer=function(pre_cmd,post_cmd){this.line=new Array();this.script="";this.pre_cmd=pre_cmd;this.post_cmd=post_cmd;for(var i=0;i<this.pre_cmd.length;i++){this.push(pre_cmd[i])}};EJS.Buffer.prototype={push:function(cmd){this.line.push(cmd)},cr:function(){this.script=this.script+this.line.join("; ");this.line=new Array();this.script=this.script+"\n"},close:function(){if(this.line.length>0){for(var i=0;i<this.post_cmd.length;i++){this.push(pre_cmd[i])}this.script=this.script+this.line.join("; ");line=null}}};EJS.Compiler=function(source,left){this.pre_cmd=["var ___ViewO = [];"];this.post_cmd=new Array();this.source=" ";if(source!=null){if(typeof source=="string"){source=source.replace(/\r\n/g,"\n");source=source.replace(/\r/g,"\n");this.source=source}else{if(source.innerHTML){this.source=source.innerHTML}}if(typeof this.source!="string"){this.source=""}}left=left||"<";var right=">";switch(left){case"[":right="]";break;case"<":break;default:throw left+" is not a supported deliminator";break}this.scanner=new EJS.Scanner(this.source,left,right);this.out=""};EJS.Compiler.prototype={compile:function(options,name){options=options||{};this.out="";var put_cmd="___ViewO.push(";var insert_cmd=put_cmd;var buff=new EJS.Buffer(this.pre_cmd,this.post_cmd);var content="";var clean=function(content){content=content.replace(/\\/g,"\\\\");content=content.replace(/\n/g,"\\n");content=content.replace(/"/g,'\\"');return content};this.scanner.scan(function(token,scanner){if(scanner.stag==null){switch(token){case"\n":content=content+"\n";buff.push(put_cmd+'"'+clean(content)+'");');buff.cr();content="";break;case scanner.left_delimiter:case scanner.left_equal:case scanner.left_comment:scanner.stag=token;if(content.length>0){buff.push(put_cmd+'"'+clean(content)+'")')}content="";break;case scanner.double_left:content=content+scanner.left_delimiter;break;default:content=content+token;break}}else{switch(token){case scanner.right_delimiter:switch(scanner.stag){case scanner.left_delimiter:if(content[content.length-1]=="\n"){content=chop(content);buff.push(content);buff.cr()}else{buff.push(content)}break;case scanner.left_equal:buff.push(insert_cmd+"(EJS.Scanner.to_text("+content+")))");break}scanner.stag=null;content="";break;case scanner.double_right:content=content+scanner.right_delimiter;break;default:content=content+token;break}}});if(content.length>0){buff.push(put_cmd+'"'+clean(content)+'")')}buff.close();this.out=buff.script+";";var to_be_evaled="/*"+name+"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(to_be_evaled)}catch(e){if(typeof JSLINT!="undefined"){JSLINT(this.out);for(var i=0;i<JSLINT.errors.length;i++){var error=JSLINT.errors[i];if(error.reason!="Unnecessary semicolon."){error.line++;var e=new Error();e.lineNumber=error.line;e.message=error.reason;if(options.view){e.fileName=options.view}throw e}}}else{throw e}}}};EJS.config=function(options){EJS.cache=options.cache!=null?options.cache:EJS.cache;EJS.type=options.type!=null?options.type:EJS.type;EJS.ext=options.ext!=null?options.ext:EJS.ext;var templates_directory=EJS.templates_directory||{};EJS.templates_directory=templates_directory;EJS.get=function(path,cache){if(cache==false){return null}if(templates_directory[path]){return templates_directory[path]}return null};EJS.update=function(path,template){if(path==null){return}templates_directory[path]=template};EJS.INVALID_PATH=-1};EJS.config({cache:true,type:"<",ext:".ejs"});EJS.Helpers=function(data,extras){this._data=data;this._extras=extras;extend(this,extras)};EJS.Helpers.prototype={view:function(options,data,helpers){if(!helpers){helpers=this._extras}if(!data){data=this._data}return new EJS(options).render(data,helpers)},to_text:function(input,null_text){if(input==null||input===undefined){return null_text||""}if(input instanceof Date){return input.toDateString()}if(input.toString){return input.toString().replace(/\n/g,"<br />").replace(/''/g,"'")}return""}};EJS.newRequest=function(){var factories=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var i=0;i<factories.length;i++){try{var request=factories[i]();if(request!=null){return request}}catch(e){continue}}};EJS.request=function(path){var request=new EJS.newRequest();request.open("GET",path,false);try{request.send(null)}catch(e){return null}if(request.status==404||request.status==2||(request.status==0&&request.responseText=="")){return null}return request.responseText};EJS.ajax_request=function(params){params.method=(params.method?params.method:"GET");var request=new EJS.newRequest();request.onreadystatechange=function(){if(request.readyState==4){if(request.status==200){params.onComplete(request)}else{params.onComplete(request)}}};request.open(params.method,params.url);request.send(null)}})();EJS.Helpers.prototype.date_tag=function(b,f,d){if(!(f instanceof Date)){f=new Date()}var c=["January","February","March","April","May","June","July","August","September","October","November","December"];var n=[],a=[],e=[];var k=f.getFullYear();var m=f.getMonth();var g=f.getDate();for(var h=k-15;h<k+15;h++){n.push({value:h,text:h})}for(var p=0;p<12;p++){a.push({value:(p),text:c[p]})}for(var l=0;l<31;l++){e.push({value:(l+1),text:(l+1)})}var i=this.select_tag(b+"[year]",k,n,{id:b+"[year]"});var o=this.select_tag(b+"[month]",m,a,{id:b+"[month]"});var j=this.select_tag(b+"[day]",g,e,{id:b+"[day]"});return i+o+j};EJS.Helpers.prototype.form_tag=function(b,a){a=a||{};a.action=b;if(a.multipart==true){a.method="post";a.enctype="multipart/form-data"}return this.start_tag_for("form",a)};EJS.Helpers.prototype.form_tag_end=function(){return this.tag_end("form")};EJS.Helpers.prototype.hidden_field_tag=function(a,b,c){return this.input_field_tag(a,b,"hidden",c)};EJS.Helpers.prototype.input_field_tag=function(a,b,c,d){d=d||{};d.id=d.id||a;d.value=b||"";d.type=c||"text";d.name=a;return this.single_tag_for("input",d)};EJS.Helpers.prototype.is_current_page=function(a){return(window.location.href==a||window.location.pathname==a?true:false)};EJS.Helpers.prototype.link_to=function(c,a,b){if(!c){var c="null"}if(!b){var b={}}if(b.confirm){b.onclick=' var ret_confirm = confirm("'+b.confirm+'"); if(!ret_confirm){ return false;} ';b.confirm=null}b.href=a;return this.start_tag_for("a",b)+c+this.tag_end("a")};EJS.Helpers.prototype.submit_link_to=function(c,a,b){if(!c){var c="null"}if(!b){var b={}}b.onclick=b.onclick||"";if(b.confirm){b.onclick=' var ret_confirm = confirm("'+b.confirm+'"); if(!ret_confirm){ return false;} ';b.confirm=null}b.value=c;b.type="submit";b.onclick=b.onclick+(a?this.url_for(a):"")+"return false;";return this.start_tag_for("input",b)};EJS.Helpers.prototype.link_to_if=function(b,f,a,d,e,c){return this.link_to_unless((b==false),f,a,d,e,c)};EJS.Helpers.prototype.link_to_unless=function(b,e,a,d,c){d=d||{};if(b){if(c&&typeof c=="function"){return c(e,a,d,c)}else{return e}}else{return this.link_to(e,a,d)}};EJS.Helpers.prototype.link_to_unless_current=function(d,a,c,b){c=c||{};return this.link_to_unless(this.is_current_page(a),d,a,c,b)};EJS.Helpers.prototype.password_field_tag=function(a,b,c){return this.input_field_tag(a,b,"password",c)};EJS.Helpers.prototype.select_tag=function(f,c,b,d){d=d||{};d.id=d.id||f;d.value=c;d.name=f;var h="";h+=this.start_tag_for("select",d);for(var e=0;e<b.length;e++){var g=b[e];var a={value:g.value};if(g.value==c){a.selected="selected"}h+=this.start_tag_for("option",a)+g.text+this.tag_end("option")}h+=this.tag_end("select");return h};EJS.Helpers.prototype.single_tag_for=function(a,b){return this.tag(a,b,"/>")};EJS.Helpers.prototype.start_tag_for=function(a,b){return this.tag(a,b)};EJS.Helpers.prototype.submit_tag=function(a,b){b=b||{};b.type=b.type||"submit";b.value=a||"Submit";return this.single_tag_for("input",b)};EJS.Helpers.prototype.tag=function(e,c,d){if(!d){var d=">"}var f=" ";for(var a in c){if(c[a]!=null){var b=c[a].toString()}else{var b=""}if(a=="Class"){a="class"}if(b.indexOf("'")!=-1){f+=a+'="'+b+'" '}else{f+=a+"='"+b+"' "}}return"<"+e+f+d};EJS.Helpers.prototype.tag_end=function(a){return"</"+a+">"};EJS.Helpers.prototype.text_area_tag=function(a,b,c){c=c||{};c.id=c.id||a;c.name=c.name||a;b=b||"";if(c.size){c.cols=c.size.split("x")[0];c.rows=c.size.split("x")[1];delete c.size}c.cols=c.cols||50;c.rows=c.rows||4;return this.start_tag_for("textarea",c)+b+this.tag_end("textarea")};EJS.Helpers.prototype.text_tag=EJS.Helpers.prototype.text_area_tag;EJS.Helpers.prototype.text_field_tag=function(a,b,c){return this.input_field_tag(a,b,"text",c)};EJS.Helpers.prototype.url_for=function(a){return'window.location="'+a+'";'};EJS.Helpers.prototype.img_tag=function(c,b,a){a=a||{};a.src=c;a.alt=b;return this.single_tag_for("img",a)};var oNweCommonUtils={getInternetExplorerVersion:function(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c},attachEnterKeyEvent:function(a,c){var b=13;a.keydown(function(d){if(d.keyCode==b){c()}})},isChromeOrFirefox:function(){var a=navigator.userAgent.toLowerCase();if(-1!=a.indexOf("chrome")){return true}else{if(-1!=a.indexOf("firefox")){return true}}return false},isMsBrowser:function(){var a=navigator.userAgent.toLowerCase();return(navigator.appName=="Netscape"&&navigator.userAgent.search("Trident")>-1)||(a.indexOf("msie")>-1)||a.indexOf("edge/")>-1},preventEnterKey:function(a){if(a.keyCode==13){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}}},preventEventBubbling:function(a){$(a).keydown(function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}});$(a).click(function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}});$(a).dblclick(function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}})},attachLabelEvent:function(a){if(a==null){return}var b=a.attr("id");if(a.val().length>0){a.parent().find('label[for="'+b+'"]').addClass("blind")}else{a.parent().find('label[for="'+b+'"]').removeClass("blind")}a.focus(function(c){a.parent().find('label[for="'+b+'"]').addClass("blind")}).focusout(function(){if(a.val().length==0){a.parent().find('label[for="'+b+'"]').removeClass("blind")}})},attachAllLabelEvent:function(){oSelf=this;$('input[type="text"]').each(function(){oSelf.attachLabelEvent($(this))});$('input[type="password"]').each(function(){oSelf.attachLabelEvent($(this))});$('input[type="email"]').each(function(){oSelf.attachLabelEvent($(this))})}};PasswordSafetyModel={html:{tooltip:'<div id="_safetyTooltip" class="tooltip" style="position:absolute;display:none;">',capslock:'<span class="ex2">'+Message.PW_EXPIRED_16+"</span>"},level1:{title:Message.PW_EXPIRED_10_1,levelClass:"",level:Message.PW_EXPIRED_10_2,message:Message.PW_EXPIRED_11},level2:{title:Message.PW_EXPIRED_12,levelClass:"level1",level:Message.PW_EXPIRED_12_1,message:Message.PW_EXPIRED_12_4},level3:{title:Message.PW_EXPIRED_12,levelClass:"level2",level:Message.PW_EXPIRED_12_2,message:Message.PW_EXPIRED_13},level4:{title:Message.PW_EXPIRED_12,levelClass:"level3",level:Message.PW_EXPIRED_12_3,message:Message.PW_EXPIRED_14}};PasswordSafetyTooltip=function(){this.init.apply(this,arguments)};PasswordSafetyTooltip.prototype={SAFETY_LEVEL_1:1,init:function(b,a){this._sSelector=b||"";this._sTooptipSelector=a.tooltipSelector;this._sLevelUrl=a.levelUrl||"";this._aTemplateUrl=a.templateUrl||"";this._tenantId=a.tenantId||"";this._domainId=a.domainId||"";this.PASSWORD_MIN_LENGTH=a.minLength||8;this.reason="";this._htStringTable=a.passwordSafetyModel||PasswordSafetyModel;if(a.passwordDifficultyType==1){this._htStringTable.level1.message=Message.replaceParam(Message.PW_EXPIRED_11,this.PASSWORD_MIN_LENGTH)}else{this._htStringTable.level1.message=Message.replaceParam(Message.PW_EXPIRED_11_2,this.PASSWORD_MIN_LENGTH)}this._sHidPasswordSecurityLevelSelector=a.hidPasswordSecurityLevelSelector;this._initHelper();this._assignElement();this._bindEvents();this._assignTemplate()},_initHelper:function(){this._oCapsLockHelper=new CapsLockHelper(this._sSelector)},_assignElement:function(){this._welTextInput=$(this._sSelector);this._welTooltip=$(this._sTooptipSelector);this._welCapsLock=$(this._htStringTable.html.capslock);this._welSafetyLevelInput=$(this._sHidPasswordSecurityLevelSelector)},_bindEvents:function(){var a=this;this._welTextInput.on({input:function(b){a._doCheckSafetyLevel()},focus:$.proxy(function(){if($.trim(this._welTextInput.val()).length>0){this._welTooltip.show()}},this),blur:$.proxy(function(){this._welTooltip.hide()},this)})},_doCheckSafetyLevel:function(){var b=this;var a=b._welTextInput.val();if(a.length>=this.PASSWORD_MIN_LENGTH){$.post(this._sLevelUrl,{password:a,tenantId:b._tenantId,domainId:b._domainId},function(c){b._showTooltip(c.level);b.reason=c.reason})}else{b._showTooltip(b.SAFETY_LEVEL_1);b.reason=""}},_showTooltip:function(a){this._welTooltip.show();this._welTooltip.html(this._tmplTooltip.render(this._getPwdSafetyDataMap(a)));this._welSafetyLevelInput.val(a)},_getPwdSafetyDataMap:function(b){var a={};if(this._oCapsLockHelper.getStatus()){a=this._htStringTable["level"+b];a.capslock=this._welCapsLock.get(0).outerHTML}else{a=this._htStringTable["level"+b];a.capslock=""}return a},_assignTemplate:function(){this._tmplTooltip=new EJS({url:this._aTemplateUrl})},isRepeateChar:function(){return this.reason=="REPEAT_CHAR"}};(function(a,c,b){if(typeof window.define==="function"&&window.define.amd){window.define(b)}else{if(typeof module!=="undefined"&&module.exports){module.exports=b()}else{if(c.exports){c.exports=b()}else{c[a]=b()}}}})("Fingerprint2",this,function(){var Fingerprint2=function(options){if(!(this instanceof Fingerprint2)){return new Fingerprint2(options)}var defaultOptions={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:true,sortPluginsFor:[/palemoon/i],excludeDoNotTrack:true,excludePixelRatio:true};this.options=this.extend(options,defaultOptions);this.nativeForEach=Array.prototype.forEach;this.nativeMap=Array.prototype.map};Fingerprint2.prototype={extend:function(source,target){if(source==null){return target}for(var k in source){if(source[k]!=null&&target[k]!==source[k]){target[k]=source[k]}}return target},get:function(done){var that=this;var keys={data:[],addPreprocessedComponent:function(pair){var componentValue=pair.value;if(typeof that.options.preprocessor==="function"){componentValue=that.options.preprocessor(pair.key,componentValue)}keys.data.push({key:pair.key,value:componentValue})}};keys=this.userAgentKey(keys);keys=this.languageKey(keys);keys=this.colorDepthKey(keys);keys=this.deviceMemoryKey(keys);keys=this.hardwareConcurrencyKey(keys);keys=this.screenResolutionKey(keys);keys=this.timezoneOffsetKey(keys);keys=this.sessionStorageKey(keys);keys=this.localStorageKey(keys);keys=this.platformKey(keys);keys=this.canvasKey(keys);keys=this.webglKey(keys);keys=this.webglVendorAndRendererKey(keys);keys=this.hasLiedLanguagesKey(keys);keys=this.hasLiedResolutionKey(keys);keys=this.hasLiedOsKey(keys);keys=this.hasLiedBrowserKey(keys);keys=this.customEntropyFunction(keys);this.fontsKey(keys,function(newKeys){var values=[];that.each(newKeys.data,function(pair){var value=pair.value;if(value&&typeof value.join==="function"){value=value.join(";")}values.push(value)});var murmur=that.x64hash128(values.join("~~~"),31);return done(murmur,newKeys.data)})},customEntropyFunction:function(keys){if(typeof this.options.customFunction==="function"){keys.addPreprocessedComponent({key:"custom",value:this.options.customFunction()})}return keys},userAgentKey:function(keys){if(!this.options.excludeUserAgent){keys.addPreprocessedComponent({key:"user_agent",value:this.getUserAgent()})}return keys},getUserAgent:function(){return navigator.userAgent},languageKey:function(keys){if(!this.options.excludeLanguage){keys.addPreprocessedComponent({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""})}return keys},colorDepthKey:function(keys){if(!this.options.excludeColorDepth){keys.addPreprocessedComponent({key:"color_depth",value:window.screen.colorDepth||-1})}return keys},deviceMemoryKey:function(keys){if(!this.options.excludeDeviceMemory){keys.addPreprocessedComponent({key:"device_memory",value:this.getDeviceMemory()})}return keys},getDeviceMemory:function(){return navigator.deviceMemory||-1},screenResolutionKey:function(keys){if(!this.options.excludeScreenResolution){return this.getScreenResolution(keys)}return keys},getScreenResolution:function(keys){var resolution;if(this.options.detectScreenOrientation){resolution=(window.screen.height>window.screen.width)?[window.screen.height,window.screen.width]:[window.screen.width,window.screen.height]}else{resolution=[window.screen.width,window.screen.height]}keys.addPreprocessedComponent({key:"resolution",value:resolution});return keys},timezoneOffsetKey:function(keys){if(!this.options.excludeTimezoneOffset){keys.addPreprocessedComponent({key:"timezone_offset",value:new Date().getTimezoneOffset()})}return keys},sessionStorageKey:function(keys){if(!this.options.excludeSessionStorage&&this.hasSessionStorage()){keys.addPreprocessedComponent({key:"session_storage",value:1})}return keys},localStorageKey:function(keys){if(!this.options.excludeSessionStorage&&this.hasLocalStorage()){keys.addPreprocessedComponent({key:"local_storage",value:1})}return keys},platformKey:function(keys){if(!this.options.excludePlatform){keys.addPreprocessedComponent({key:"navigator_platform",value:this.getNavigatorPlatform()})}return keys},canvasKey:function(keys){if(!this.options.excludeCanvas&&this.isCanvasSupported()){keys.addPreprocessedComponent({key:"canvas",value:this.getCanvasFp()})}return keys},webglKey:function(keys){if(!this.options.excludeWebGL&&this.isWebGlSupported()){keys.addPreprocessedComponent({key:"webgl",value:this.getWebglFp()})}return keys},webglVendorAndRendererKey:function(keys){if(!this.options.excludeWebGLVendorAndRenderer&&this.isWebGlSupported()){keys.addPreprocessedComponent({key:"webgl_vendor",value:this.getWebglVendorAndRenderer()})}return keys},hasLiedLanguagesKey:function(keys){if(!this.options.excludeHasLiedLanguages){keys.addPreprocessedComponent({key:"has_lied_languages",value:this.getHasLiedLanguages()})}return keys},hasLiedResolutionKey:function(keys){if(!this.options.excludeHasLiedResolution){keys.addPreprocessedComponent({key:"has_lied_resolution",value:this.getHasLiedResolution()})}return keys},hasLiedOsKey:function(keys){if(!this.options.excludeHasLiedOs){keys.addPreprocessedComponent({key:"has_lied_os",value:this.getHasLiedOs()})}return keys},hasLiedBrowserKey:function(keys){if(!this.options.excludeHasLiedBrowser){keys.addPreprocessedComponent({key:"has_lied_browser",value:this.getHasLiedBrowser()})}return keys},fontsKey:function(keys,done){return done(keys)},hardwareConcurrencyKey:function(keys){if(!this.options.excludeHardwareConcurrency){keys.addPreprocessedComponent({key:"hardware_concurrency",value:this.getHardwareConcurrency()})}return keys},hasSessionStorage:function(){try{return !!window.sessionStorage}catch(e){return true}},hasLocalStorage:function(){try{return !!window.localStorage}catch(e){return true}},getHardwareConcurrency:function(){if(navigator.hardwareConcurrency){return navigator.hardwareConcurrency}return"unknown"},getNavigatorPlatform:function(){if(navigator.platform){return navigator.platform}else{return"unknown"}},getCanvasFp:function(){var result=[];var canvas=document.createElement("canvas");canvas.width=2000;canvas.height=200;canvas.style.display="inline";var ctx=canvas.getContext("2d");ctx.rect(0,0,10,10);ctx.rect(2,2,6,6);result.push("canvas winding:"+((ctx.isPointInPath(5,5,"evenodd")===false)?"yes":"no"));ctx.textBaseline="alphabetic";ctx.fillStyle="#f60";ctx.fillRect(125,1,62,20);ctx.fillStyle="#069";if(this.options.dontUseFakeFontInCanvas){ctx.font="11pt Arial"}else{ctx.font="11pt no-real-font-123"}ctx.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15);ctx.fillStyle="rgba(102, 204, 0, 0.2)";ctx.font="18pt Arial";ctx.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45);ctx.globalCompositeOperation="multiply";ctx.fillStyle="rgb(255,0,255)";ctx.beginPath();ctx.arc(50,50,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(0,255,255)";ctx.beginPath();ctx.arc(100,50,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(255,255,0)";ctx.beginPath();ctx.arc(75,100,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(255,0,255)";ctx.arc(75,75,75,0,Math.PI*2,true);ctx.arc(75,75,25,0,Math.PI*2,true);ctx.fill("evenodd");if(canvas.toDataURL){result.push("canvas fp:"+canvas.toDataURL())}return result.join("~")},getWebglFp:function(){var gl;var fa2s=function(fa){gl.clearColor(0,0,0,1);gl.enable(gl.DEPTH_TEST);gl.depthFunc(gl.LEQUAL);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);return"["+fa[0]+", "+fa[1]+"]"};var maxAnisotropy=function(gl){var ext=gl.getExtension("EXT_texture_filter_anisotropic")||gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||gl.getExtension("MOZ_EXT_texture_filter_anisotropic");if(ext){var anisotropy=gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT);if(anisotropy===0){anisotropy=2}return anisotropy}else{return null}};gl=this.getWebglCanvas();if(!gl){return null}var result=[];var vShaderTemplate="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}";var fShaderTemplate="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}";var vertexPosBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexPosBuffer);var vertices=new Float32Array([-0.2,-0.9,0,0.4,-0.26,0,0,0.732134444,0]);gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);vertexPosBuffer.itemSize=3;vertexPosBuffer.numItems=3;var program=gl.createProgram();var vshader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vshader,vShaderTemplate);gl.compileShader(vshader);var fshader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fshader,fShaderTemplate);gl.compileShader(fshader);gl.attachShader(program,vshader);gl.attachShader(program,fshader);gl.linkProgram(program);gl.useProgram(program);program.vertexPosAttrib=gl.getAttribLocation(program,"attrVertex");program.offsetUniform=gl.getUniformLocation(program,"uniformOffset");gl.enableVertexAttribArray(program.vertexPosArray);gl.vertexAttribPointer(program.vertexPosAttrib,vertexPosBuffer.itemSize,gl.FLOAT,!1,0,0);gl.uniform2f(program.offsetUniform,1,1);gl.drawArrays(gl.TRIANGLE_STRIP,0,vertexPosBuffer.numItems);try{result.push(gl.canvas.toDataURL())}catch(e){}result.push("extensions:"+(gl.getSupportedExtensions()||[]).join(";"));result.push("webgl aliased line width range:"+fa2s(gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE)));result.push("webgl aliased point size range:"+fa2s(gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE)));result.push("webgl alpha bits:"+gl.getParameter(gl.ALPHA_BITS));result.push("webgl antialiasing:"+(gl.getContextAttributes().antialias?"yes":"no"));result.push("webgl blue bits:"+gl.getParameter(gl.BLUE_BITS));result.push("webgl depth bits:"+gl.getParameter(gl.DEPTH_BITS));result.push("webgl green bits:"+gl.getParameter(gl.GREEN_BITS));result.push("webgl max anisotropy:"+maxAnisotropy(gl));result.push("webgl max combined texture image units:"+gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS));result.push("webgl max cube map texture size:"+gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE));result.push("webgl max fragment uniform vectors:"+gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS));result.push("webgl max render buffer size:"+gl.getParameter(gl.MAX_RENDERBUFFER_SIZE));result.push("webgl max texture image units:"+gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));result.push("webgl max texture size:"+gl.getParameter(gl.MAX_TEXTURE_SIZE));result.push("webgl max varying vectors:"+gl.getParameter(gl.MAX_VARYING_VECTORS));result.push("webgl max vertex attribs:"+gl.getParameter(gl.MAX_VERTEX_ATTRIBS));result.push("webgl max vertex texture image units:"+gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS));result.push("webgl max vertex uniform vectors:"+gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS));result.push("webgl max viewport dims:"+fa2s(gl.getParameter(gl.MAX_VIEWPORT_DIMS)));result.push("webgl red bits:"+gl.getParameter(gl.RED_BITS));result.push("webgl renderer:"+gl.getParameter(gl.RENDERER));result.push("webgl shading language version:"+gl.getParameter(gl.SHADING_LANGUAGE_VERSION));result.push("webgl stencil bits:"+gl.getParameter(gl.STENCIL_BITS));result.push("webgl vendor:"+gl.getParameter(gl.VENDOR));result.push("webgl version:"+gl.getParameter(gl.VERSION));try{var extensionDebugRendererInfo=gl.getExtension("WEBGL_debug_renderer_info");if(extensionDebugRendererInfo){result.push("webgl unmasked vendor:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_VENDOR_WEBGL));result.push("webgl unmasked renderer:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL))}}catch(e){}if(!gl.getShaderPrecisionFormat){return result.join("~")}var that=this;that.each(["FLOAT","INT"],function(numType){that.each(["VERTEX","FRAGMENT"],function(shader){that.each(["HIGH","MEDIUM","LOW"],function(numSize){that.each(["precision","rangeMin","rangeMax"],function(key){var format=gl.getShaderPrecisionFormat(gl[shader+"_SHADER"],gl[numSize+"_"+numType])[key];if(key!=="precision"){key="precision "+key}var line=["webgl ",shader.toLowerCase()," shader ",numSize.toLowerCase()," ",numType.toLowerCase()," ",key,":",format];result.push(line.join(""))})})})});return result.join("~")},getWebglVendorAndRenderer:function(){try{var glContext=this.getWebglCanvas();var extensionDebugRendererInfo=glContext.getExtension("WEBGL_debug_renderer_info");return glContext.getParameter(extensionDebugRendererInfo.UNMASKED_VENDOR_WEBGL)+"~"+glContext.getParameter(extensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL)}catch(e){return null}},getHasLiedLanguages:function(){if(typeof navigator.languages!=="undefined"){try{var firstLanguages=navigator.languages[0].substr(0,2);if(firstLanguages!==navigator.language.substr(0,2)){return true}}catch(err){return true}}return false},getHasLiedResolution:function(){if(window.screen.width<window.screen.availWidth){return true}if(window.screen.height<window.screen.availHeight){return true}return false},getHasLiedOs:function(){var userAgent=navigator.userAgent.toLowerCase();var oscpu=navigator.oscpu;var platform=navigator.platform.toLowerCase();var os;if(userAgent.indexOf("windows phone")>=0){os="Windows Phone"}else{if(userAgent.indexOf("win")>=0){os="Windows"}else{if(userAgent.indexOf("android")>=0){os="Android"}else{if(userAgent.indexOf("linux")>=0){os="Linux"}else{if(userAgent.indexOf("iphone")>=0||userAgent.indexOf("ipad")>=0){os="iOS"}else{if(userAgent.indexOf("mac")>=0){os="Mac"}else{os="Other"}}}}}}var mobileDevice;if(("ontouchstart" in window)||(navigator.maxTouchPoints>0)||(navigator.msMaxTouchPoints>0)){mobileDevice=true}else{mobileDevice=false}if(mobileDevice&&os!=="Windows Phone"&&os!=="Android"&&os!=="iOS"&&os!=="Other"){return true}if(typeof oscpu!=="undefined"){oscpu=oscpu.toLowerCase();if(oscpu.indexOf("win")>=0&&os!=="Windows"&&os!=="Windows Phone"){return true}else{if(oscpu.indexOf("linux")>=0&&os!=="Linux"&&os!=="Android"){return true}else{if(oscpu.indexOf("mac")>=0&&os!=="Mac"&&os!=="iOS"){return true}else{if((oscpu.indexOf("win")===-1&&oscpu.indexOf("linux")===-1&&oscpu.indexOf("mac")===-1)!==(os==="Other")){return true}}}}}if(platform.indexOf("win")>=0&&os!=="Windows"&&os!=="Windows Phone"){return true}else{if((platform.indexOf("linux")>=0||platform.indexOf("android")>=0||platform.indexOf("pike")>=0)&&os!=="Linux"&&os!=="Android"){return true}else{if((platform.indexOf("mac")>=0||platform.indexOf("ipad")>=0||platform.indexOf("ipod")>=0||platform.indexOf("iphone")>=0)&&os!=="Mac"&&os!=="iOS"){return true}else{if((platform.indexOf("win")===-1&&platform.indexOf("linux")===-1&&platform.indexOf("mac")===-1)!==(os==="Other")){return true}}}}if(typeof navigator.plugins==="undefined"&&os!=="Windows"&&os!=="Windows Phone"){return true}return false},getHasLiedBrowser:function(){var userAgent=navigator.userAgent.toLowerCase();var productSub=navigator.productSub;var browser;if(userAgent.indexOf("firefox")>=0){browser="Firefox"}else{if(userAgent.indexOf("opera")>=0||userAgent.indexOf("opr")>=0){browser="Opera"}else{if(userAgent.indexOf("chrome")>=0){browser="Chrome"}else{if(userAgent.indexOf("safari")>=0){browser="Safari"}else{if(userAgent.indexOf("trident")>=0){browser="Internet Explorer"}else{browser="Other"}}}}}if((browser==="Chrome"||browser==="Safari"||browser==="Opera")&&productSub!=="20030107"){return true}var tempRes=eval.toString().length;if(tempRes===37&&browser!=="Safari"&&browser!=="Firefox"&&browser!=="Other"){return true}else{if(tempRes===39&&browser!=="Internet Explorer"&&browser!=="Other"){return true}else{if(tempRes===33&&browser!=="Chrome"&&browser!=="Opera"&&browser!=="Other"){return true}}}var errFirefox;try{throw"a"}catch(err){try{err.toSource();errFirefox=true}catch(errOfErr){errFirefox=false}}if(errFirefox&&browser!=="Firefox"&&browser!=="Other"){return true}return false},isCanvasSupported:function(){var elem=document.createElement("canvas");return !!(elem.getContext&&elem.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported()){return false}var glContext=this.getWebglCanvas();return !!window.WebGLRenderingContext&&!!glContext},isIE:function(){if(navigator.appName==="Microsoft Internet Explorer"){return true}else{if(navigator.appName==="Netscape"&&/Trident/.test(navigator.userAgent)){return true}}return false},hasSwfObjectLoaded:function(){return typeof window.swfobject!=="undefined"},hasMinFlashInstalled:function(){return window.swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var node=document.createElement("div");node.setAttribute("id",this.options.swfContainerId);document.body.appendChild(node)},loadSwfAndDetectFonts:function(done){var hiddenCallback="___fp_swf_loaded";window[hiddenCallback]=function(fonts){done(fonts)};var id=this.options.swfContainerId;this.addFlashDivNode();var flashvars={onReady:hiddenCallback};var flashparams={allowScriptAccess:"always",menu:"false"};window.swfobject.embedSWF(this.options.swfPath,id,"1","1","9.0.0",false,flashvars,flashparams,{})},getWebglCanvas:function(){var canvas=document.createElement("canvas");var gl=null;try{gl=canvas.getContext("webgl")||canvas.getContext("experimental-webgl")}catch(e){}if(!gl){gl=null}return gl},each:function(obj,iterator,context){if(obj===null){return}if(this.nativeForEach&&obj.forEach===this.nativeForEach){obj.forEach(iterator,context)}else{if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)==={}){return}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)==={}){return}}}}}},map:function(obj,iterator,context){var results=[];if(obj==null){return results}if(this.nativeMap&&obj.map===this.nativeMap){return obj.map(iterator,context)}this.each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results},x64Add:function(m,n){m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]+n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]+n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]+n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=m[0]+n[0];o[0]&=65535;return[(o[0]<<16)|o[1],(o[2]<<16)|o[3]]},x64Multiply:function(m,n){m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]*n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]*n[3];o[1]+=o[2]>>>16;o[2]&=65535;o[2]+=m[3]*n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]*n[3];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[2]*n[2];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[3]*n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=(m[0]*n[3])+(m[1]*n[2])+(m[2]*n[1])+(m[3]*n[0]);o[0]&=65535;return[(o[0]<<16)|o[1],(o[2]<<16)|o[3]]},x64Rotl:function(m,n){n%=64;if(n===32){return[m[1],m[0]]}else{if(n<32){return[(m[0]<<n)|(m[1]>>>(32-n)),(m[1]<<n)|(m[0]>>>(32-n))]}else{n-=32;return[(m[1]<<n)|(m[0]>>>(32-n)),(m[0]<<n)|(m[1]>>>(32-n))]}}},x64LeftShift:function(m,n){n%=64;if(n===0){return m}else{if(n<32){return[(m[0]<<n)|(m[1]>>>(32-n)),m[1]<<n]}else{return[m[1]<<(n-32),0]}}},x64Xor:function(m,n){return[m[0]^n[0],m[1]^n[1]]},x64Fmix:function(h){h=this.x64Xor(h,[0,h[0]>>>1]);h=this.x64Multiply(h,[4283543511,3981806797]);h=this.x64Xor(h,[0,h[0]>>>1]);h=this.x64Multiply(h,[3301882366,444984403]);h=this.x64Xor(h,[0,h[0]>>>1]);return h},x64hash128:function(key,seed){key=key||"";seed=seed||0;var remainder=key.length%16;var bytes=key.length-remainder;var h1=[0,seed];var h2=[0,seed];var k1=[0,0];var k2=[0,0];var c1=[2277735313,289559509];var c2=[1291169091,658871167];for(var i=0;i<bytes;i=i+16){k1=[((key.charCodeAt(i+4)&255))|((key.charCodeAt(i+5)&255)<<8)|((key.charCodeAt(i+6)&255)<<16)|((key.charCodeAt(i+7)&255)<<24),((key.charCodeAt(i)&255))|((key.charCodeAt(i+1)&255)<<8)|((key.charCodeAt(i+2)&255)<<16)|((key.charCodeAt(i+3)&255)<<24)];k2=[((key.charCodeAt(i+12)&255))|((key.charCodeAt(i+13)&255)<<8)|((key.charCodeAt(i+14)&255)<<16)|((key.charCodeAt(i+15)&255)<<24),((key.charCodeAt(i+8)&255))|((key.charCodeAt(i+9)&255)<<8)|((key.charCodeAt(i+10)&255)<<16)|((key.charCodeAt(i+11)&255)<<24)];k1=this.x64Multiply(k1,c1);k1=this.x64Rotl(k1,31);k1=this.x64Multiply(k1,c2);h1=this.x64Xor(h1,k1);h1=this.x64Rotl(h1,27);h1=this.x64Add(h1,h2);h1=this.x64Add(this.x64Multiply(h1,[0,5]),[0,1390208809]);k2=this.x64Multiply(k2,c2);k2=this.x64Rotl(k2,33);k2=this.x64Multiply(k2,c1);h2=this.x64Xor(h2,k2);h2=this.x64Rotl(h2,31);h2=this.x64Add(h2,h1);h2=this.x64Add(this.x64Multiply(h2,[0,5]),[0,944331445])}k1=[0,0];k2=[0,0];switch(remainder){case 15:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+14)],48));case 14:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+13)],40));case 13:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+12)],32));case 12:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+11)],24));case 11:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+10)],16));case 10:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+9)],8));case 9:k2=this.x64Xor(k2,[0,key.charCodeAt(i+8)]);k2=this.x64Multiply(k2,c2);k2=this.x64Rotl(k2,33);k2=this.x64Multiply(k2,c1);h2=this.x64Xor(h2,k2);case 8:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+7)],56));case 7:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+6)],48));case 6:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+5)],40));case 5:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+4)],32));case 4:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+3)],24));case 3:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+2)],16));case 2:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+1)],8));case 1:k1=this.x64Xor(k1,[0,key.charCodeAt(i)]);k1=this.x64Multiply(k1,c1);k1=this.x64Rotl(k1,31);k1=this.x64Multiply(k1,c2);h1=this.x64Xor(h1,k1)}h1=this.x64Xor(h1,[0,key.length]);h2=this.x64Xor(h2,[0,key.length]);h1=this.x64Add(h1,h2);h2=this.x64Add(h2,h1);h1=this.x64Fmix(h1);h2=this.x64Fmix(h2);h1=this.x64Add(h1,h2);h2=this.x64Add(h2,h1);return("00000000"+(h1[0]>>>0).toString(16)).slice(-8)+("00000000"+(h1[1]>>>0).toString(16)).slice(-8)+("00000000"+(h2[0]>>>0).toString(16)).slice(-8)+("00000000"+(h2[1]>>>0).toString(16)).slice(-8)}};Fingerprint2.VERSION="1.8.0";return Fingerprint2});DnsAdminInfo=function(){this.init.apply(this,arguments)};DnsAdminInfo.prototype={_ENTER_KEY_CODE:13,_ajaxReady:true,_retryCount:0,_nNotFoundDomain:1,_nNReturnCodeWrongIDC:2,_nMultiDomain:3,_nUsingSSOOrGroupName:4,_nUsingInternalEmail:5,_nNotValidEmail:6,init:function(){this._attachEvent();$("#_mailDomain").val("");$("#_privateEmail").val("");setTimeout(function(){$("#_mailDomain").focus()},100)},_attachEvent:function(){var a=this;$("#_mailDomain").blur(function(){a._checkMailDomain()});$("#_privateEmail").blur(function(){a._checkEmail()});$("#_addDnsAdminInfoBtn").click(function(){a._addDnsAdminInfo()});$("#_txtCopyBtn").click(function(){$("#_txtValue").select();var b=document.execCommand("copy");console.log(b)});$("#_cNameValueCopyBtn").click(function(){$("#_cNameValue").select();var b=document.execCommand("copy");console.log(b)})},_inputValidCheck:function(){var a=this._inputDomainValidCheck();if(a==false){return false}return this._inputEmailValidCheck()},_inputDomainValidCheck:function(){var a=$("#_mailDomain");if($.trim($(a).val())==""){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_1);setTimeout(function(){$(a).focus()},100);return false}return true},_inputEmailValidCheck:function(){var a=$("#_privateEmail");if($.trim($(a).val())==""){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_5);return false}return true},_checkMailDomain:function(){_this=this;var a=$("#_mailDomain").val();if(!this._inputDomainValidCheck()){return}$.ajax({url:"/dns/admin/domain/validation",type:"POST",async:false,dataType:"json",data:({domain:a}),success:function(b){if(b.returnCode==0){_this._retryCount=0;$("#domainId").val(b.domainId);$("#tenantId").val(b.tenantId);$("#_domainMessage").text("")}else{if(b.returnCode==_this._nNotFoundDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_1)}else{if(b.returnCode==_this._nNReturnCodeWrongIDC){if(_this._retryCount==0){_this._retryCount++;_this._checkMailDomain()}else{$("#div_fail_message").show();_this._retryCount=0}}else{if(b.returnCode==_this._nMultiDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_2)}else{if(b.returnCode==_this._nUsingSSOOrGroupName){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_3)}else{$("#_domainMessage").text(Message.DEFAULT_ERROR_MESSAGE)}}}}}if(b.returnCode!=0){setTimeout(function(){$("#_mailDomain").focus()},100)}}})},_checkEmail:function(){_this=this;var a=$("#_privateEmail").val();var b=$("#domainId").val();var c=$("#tenantId").val();if(!this._inputEmailValidCheck()){return}$.ajax({url:"/dns/admin/email/validation",type:"POST",async:false,dataType:"json",data:({privateEmail:a,domainId:b,tenantId:c}),success:function(d){if(d.returnCode==0){$("#_privateEmailMessage").text("")}else{if(d.returnCode==_this._nUsingInternalEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_4)}else{if(d.returnCode==_this._nNotValidEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_5)}else{$("#_privateEmailMessage").text(Message.DEFAULT_ERROR_MESSAGE)}}}}})},_addDnsAdminInfo:function(){_this=this;if(!this._ajaxReady){return}var a=$("#_mailDomain").val();var b=$("#_privateEmail").val();if(!this._inputValidCheck()){return}this._ajaxReady=false;$.ajax({url:"/dns/admin/info/add",type:"POST",async:false,dataType:"json",data:({domain:a,privateEmail:b}),success:function(d){if(d.returnCode==0){var c=$("#goToStep2");$(c).find("input[name=domainId]").val(d.domainId);$(c).find("input[name=tenantId]").val(d.tenantId);$(c).attr("action","/dns/admin/info/get").submit()}else{if(d.returnCode==_this._nNotFoundDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_1);setTimeout(function(){$("#_mailDomain").focus()},100)}else{if(d.returnCode==_this._nMultiDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_2);setTimeout(function(){$("#_mailDomain").focus()},100)}else{if(d.returnCode==_this._nUsingSSOOrGroupName){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_3);setTimeout(function(){$("#_mailDomain").focus()},100)}else{if(d.returnCode==_this._nUsingInternalEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_4);setTimeout(function(){$("#_privateEmail").focus()},100)}else{if(d.returnCode==_this._nNotValidEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_5);setTimeout(function(){$("#_privateEmail").focus()},100)}else{$("#_domainMessage").text(Message.DEFAULT_ERROR_MESSAGE)}}}}}}_this._ajaxReady=true}})}};DnsAdminPersonalInfo=function(){this.init.apply(this,arguments)};DnsAdminPersonalInfo.prototype={_domainName:"",_ajaxReady:true,_tenantId:"",_domainId:"",_nUsingInternalEmail:5,_nNotValidEmail:6,init:function(a){this._domainName=a.domainName;this._tenantId=a.tenantId;this._domainId=a.domainId;var b=a.browserLanguage;if(b=="ko_KR"){this._setCountry($('#countryList1 li[code="+82"]'))}else{if(b=="ja_JP"){this._setCountry($('#countryList1 li[code="+81"]'))}else{if(b=="zh_CN"){this._setCountry($('#countryList1 li[code="+86"]'))}else{if(b=="zh_TW"){this._setCountry($('#countryList1 li[code="+886"]'))}else{this._setCountry($('#countryList1 li[code="+1"]'))}}}}this._attachEvent()},_attachEvent:function(){var a=this;$("._countryBtn").click(function(){if(!$("._countryList").hasClass("freeze")){$("._countryList").toggle()}});$("._countryList li").click(function(){a._setCountry($(this))});$("#email_chk").blur(function(){a._inputEmailValidCheck()});$("#phone").blur(function(){a._inputMobileValidCheck()});$("#verifyDomainOwnershipBtn").click(function(){document.location.href="/dns/admin/info/view"});$("#registerAdminPersonalInfoBtn").click(function(){a._registerAdminPersonalInfoBtn()});$("#wrap").on("click","._findIdPwBtn",function(){document.location.href="/view/find/id?accessUrl="})},_setCountry:function(a){$("._country img").attr("src",a.find("img").attr("src"));$("._country span._code_num").html(a.attr("code"));$("._countryList").hide()},_inputEmailValidCheck:function(){var f=this;var e=$("#email_chk").val();if($.trim(e)==""){$("#notValidMessage").text(Message.DNS_ADMIN_INFO_5);return false}if(e!=$("#email_chk").val().toLowerCase()){$("#notValidMessage").text(Message.FIND_PW_21);return false}var d=false;for(var b=0;b<e.length;b++){if(e.charAt(b)==" "){$("#notValidMessage").text(Message.DNS_ADMIN_INFO_5);return false}if(e.charAt(b)=="@"){d=true}}if(!d){$("#notValidMessage").text(Message.DNS_ADMIN_INFO_5);return false}var a=e.split("@");if(a[1]==f._domainName){$("#notValidMessage").text(Message.DNS_ADMIN_INFO_4);return false}var c=false;$.ajax({url:"/dns/admin/email/validation",type:"POST",async:false,dataType:"json",data:({privateEmail:e,domainId:f._domainId,tenantId:f._tenantId}),success:function(g){if(g.returnCode==0){$("#notValidMessage").text("");c=true}else{if(g.returnCode==f._nUsingInternalEmail){$("#notValidMessage").text(Message.DNS_ADMIN_INFO_4)}else{if(g.returnCode==f._nNotValidEmail){$("#notValidMessage").text(Message.DNS_ADMIN_INFO_5)}else{$("#notValidMessage").text(Message.DEFAULT_ERROR_MESSAGE)}}}}});return c},_inputMobileValidCheck:function(){var a=$("#phone");if($.trim(a.val())==""){$("#notValidMessage").text("");return true}if($.isNumeric(a.val())==false){$("#notValidMessage").text(Message.FIND_PW_20);return false}$("#notValidMessage").text("");return true},_inputValidCheck:function(){var a=this._inputMobileValidCheck();if(a==false){return false}return this._inputEmailValidCheck()},_registerAdminPersonalInfoBtn:function(){var d=this;if(!d._ajaxReady){return}if(!d._inputValidCheck()){return}var b=$("#email_chk").val();var a=$("#phone").val();var c=$("#countryCode").text().trim();d._ajaxReady=false;$.ajax({url:"/dns/admin/personalInfo/add/callback",type:"POST",async:false,data:({privateEmail:b,mobilePhone:c+" "+a,tenantId:d._tenantId,domainId:d._domainId}),success:function(e){if(e.returnCode==0){$("#container").hide();$("#registerSuccess").show()}else{$("#notValidMessage").text(Message.DEFAULT_ERROR_MESSAGE)}d._ajaxReady=true}})}};IntegrationPasswordChange=function(){this.init.apply(this,arguments)};IntegrationPasswordChange.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_ajaxReady:true,_RESULT_CODE_TOKEN_EXPIRED:320,_nReturnCodeDomainChangeName:141,init:function(a,b,e,c,d){this._oTenantConfig=a;this._bIsAvailableToChangeEmail=b;this._bIsAvailableToChangePassword=e;this._isShowingCurrentPw=c;this._isNcs=d;this._attachEvent();this._resetLayer();this._loadLcs()},_resetLayer:function(){if($("#usage").val()=="mobileAdmin"){$("#bacBtnLayer").show()}if($("#usage").val()=="admin"||$("#usage").val()=="mobileAdmin"){$("#topTab").show()}if($("#needRemoveHeader").val()=="false"){$("#topHeader").show()}$("#successMessage").html("");$("#newEmail").val("");$("#currentPassword").val("");$("#newPassword").val("");$("#newPassword2").val("");$("#emailErrorMessage").html("").hide();$("#pwErrorMessage").html("").hide();$("#currentErrorMessage").html("").hide();$("#emailLayer").removeClass("wrong");$("#currentPasswordLayer").removeClass("wrong");$("#currentPasswordAlert").hide();$("#newPasswordLayer").removeClass("valid");$("#newPasswordLayer").removeClass("wrong");$("#newPasswordLayer").addClass("valid_normal");$("#newPasswordAlert").removeClass("ico_err");$("#newPasswordAlert").addClass("normal");$("#newPasswordLayer2").removeClass("valid");$("#newPasswordLayer2").removeClass("wrong");$("#newPasswordLayer2").addClass("valid_normal");$("#newPasswordAlert2").removeClass("ico_err");$("#newPasswordAlert2").addClass("normal");$("#changeBtnLayer").removeClass("active");$("#changeSuccessLayer").hide();if(this._bIsAvailableToChangeEmail==false&&this._bIsAvailableToChangePassword==false){$("#passwordChangeLayer").hide();$("#passwordChangeFailLayer").show()}else{if(this._bIsAvailableToChangeEmail==true&&this._bIsAvailableToChangePassword==false){$("#passwordChangeFailLayer").hide();$("#emailLayer").show();$("#currentPasswordLayer").hide();$("#newPasswordLayer").hide();$("#newPasswordLayer2").hide();$("#passwordChangeLayer").show();$("#_pwAndEmailChangeMsg").show();$("#newEmail").focus()}else{if(this._bIsAvailableToChangeEmail==false&&this._bIsAvailableToChangePassword==true){$("#passwordChangeFailLayer").hide();$("#newEmail").val("");$("#emailLayer").hide();$("#currentPasswordLayer").show();$("#newPasswordLayer").show();$("#newPasswordLayer2").show();$("#passwordChangeLayer").show();$("#_onlyPwChangeMsg").show();if(this._isShowingCurrentPw==true){$("#currentPassword").focus()}else{$("#newPassword").focus()}}else{$("#passwordChangeFailLayer").hide();$("#emailLayer").show();$("#currentPasswordLayer").show();$("#newPasswordLayer").show();$("#newPasswordLayer2").show();$("#passwordChangeLayer").show();$("#_pwAndEmailChangeMsg").show();$("#newEmail").focus()}}}if(this._isShowingCurrentPw==false){$("#currentPasswordLayer").hide()}},_attachEvent:function(){var a=this;$("#forceChange").click(function(b){b.stopPropagation();b.preventDefault();$("#forceChange").addClass("selected");$("#askChange").removeClass("selected");$("#passwordChangeLayer").show();$("#askPasswordChangeLayer").hide();a._resetLayer()});$("#askChange").click(function(b){b.stopPropagation();b.preventDefault();$("#askChange").addClass("selected");$("#forceChange").removeClass("selected");$("#passwordChangeLayer").hide();$("#askPasswordChangeLayer").show()});$("#askChangeBtn").click(function(b){b.stopPropagation();b.preventDefault();a._askChangePassword()});$("#successLayerCloseBtn").click(function(){$("#changeSuccessLayer").hide();if($("#successLayerCloseBtn").attr("data-useTwoStepLogin")=="Y"){$("#twoStepLogin").attr("action",$("#successLayerCloseBtn").attr("data-twoStepNextUrl")).submit();return}if($("#accessUrl").val()!=""){window.location=decodeURIComponent($("#accessUrl").val())}else{if($("#passwordChangeLayer").is(":visible")){a._resetLayer()}window.close()}});$("#backBtn").click(function(b){b.stopPropagation();b.preventDefault();if($("#accessUrl").val()!=""){window.location=$("#accessUrl").val()}});$("#currentPassword").on("input",function(b){$("#currentErrorMessage").html("").hide();a._btnActionCheck()});$("#newPassword").on("input",function(c){var b=$("#newPassword").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#newPassword").val($("#newPassword").val().substr(0,a._MAX_PASSWORD_LENGTH))}a._btnActionCheck()});$("#newPassword2").on("input",function(c){var b=$("#newPassword2").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#newPassword2").val($("#newPassword2").val().substr(0,a._MAX_PASSWORD_LENGTH))}a._btnActionCheck()});$("#newEmail").on("input",function(b){a._btnActionCheck()});$("#newPassword2").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._changePassword()}});$("#changeBtn").click(function(b){b.stopPropagation();b.preventDefault();if($("#onlyChangeEmail").val()=="true"){a._onlyChangeEmail()}else{a._changePassword()}});$("#newEmail").focusin(function(){$("#emailLayer").addClass("valid")});$("#newEmail").focusout(function(){if($("#emailLayer").is(":visible")){a._checkEmail()}$("#emailLayer").removeClass("valid")});$("#currentPassword").focusin(function(){$("#currentPasswordLayer").removeClass("wrong");$("#currentPasswordLayer").removeClass("valid_normal");$("#currentPasswordLayer").addClass("valid")});$("#currentPassword").focusout(function(){$("#currentPasswordLayer").removeClass("valid");$("#currentPasswordLayer").removeClass("wrong");$("#currentPasswordLayer").addClass("valid_normal");var b=$("#currentPassword").val();if(b.length>0){$("#currentPasswordAlert").show()}});$("#newPassword").focusin(function(){$("#newPasswordLayer").removeClass("wrong");$("#newPasswordLayer").removeClass("valid_normal");$("#newPasswordLayer").addClass("valid")});$("#newPassword").focusout(function(){$("#newPasswordLayer").removeClass("valid");$("#newPasswordLayer").removeClass("wrong");$("#newPasswordLayer").addClass("valid_normal");a._doCheckSafetyLevel()});$("#newPassword2").focusin(function(){$("#newPasswordLayer2").removeClass("wrong");$("#newPasswordLayer2").removeClass("valid_normal");$("#newPasswordLayer2").addClass("valid")});$("#newPassword2").focusout(function(){$("#newPasswordLayer2").removeClass("valid");$("#newPasswordLayer2").removeClass("wrong");$("#newPasswordLayer2").addClass("valid_normal");a._validCheckPassword()});$(".btn_masking").click(function(f){var b=$(this).parent().find("input.pwd");var g=b.attr("type");var d=g==="password"?"text":"password";b.attr("type",d);b.focus();var c=$(this);if(c.hasClass("checked")){c.removeClass("checked")}else{c.addClass("checked")}})},_btnActionCheck:function(){if(this._checkEmailField()&&this._checkPasswordField()){$("#changeBtnLayer").addClass("active")}else{$("#changeBtnLayer").removeClass("active")}},_checkEmailField:function(){if(this._bIsAvailableToChangeEmail){var a=$.trim($("#newEmail").val());if(a==""){return false}}return true},_checkPasswordField:function(){if(this._bIsAvailableToChangePassword){var a=$.trim($("#newPassword").val());var b=$.trim($("#newPassword2").val());if(a==""||b==""){return false}if(this._isShowingCurrentPw){var c=$.trim($("#currentPassword").val());if(c==""){return false}}return true}else{return true}},_showPasswordDefaultlayer:function(a){if(a=="password"){$("#newPasswordLayer").removeClass("valid");$("#newPasswordLayer").removeClass("wrong");$("#newPasswordLayer").addClass("valid_normal");$("#newPasswordAlert").removeClass("ico_err");$("#newPasswordAlert").addClass("ico_valid");$("#newPasswordAlert").addClass("normal");$("#pwErrorMessage").html("").hide()}else{if(a=="passwordConfirm"){$("#newPasswordLayer2").removeClass("valid");$("#newPasswordLayer2").removeClass("wrong");$("#newPasswordLayer2").addClass("valid_normal");$("#newPasswordAlert2").removeClass("ico_err");$("#newPasswordAlert2").addClass("ico_valid");$("#newPasswordAlert2").addClass("normal");$("#pwConfirmErrorMessage").html("").hide()}}},_showPasswordErrorlayer:function(a){if(a=="password"){$("#newPasswordLayer").removeClass("valid");$("#newPasswordLayer").removeClass("valid_normal");$("#newPasswordLayer").addClass("wrong");$("#newPasswordAlert").removeClass("normal");$("#newPasswordAlert").removeClass("ico_valid");$("#newPasswordAlert").addClass("ico_err")}else{if(a=="passwordConfirm"){$("#newPasswordLayer2").removeClass("valid");$("#newPasswordLayer2").removeClass("valid_normal");$("#newPasswordLayer2").addClass("wrong");$("#newPasswordAlert2").removeClass("normal");$("#newPasswordAlert2").removeClass("ico_valid");$("#newPasswordAlert2").addClass("ico_err")}}},_showPasswordCorrectlayer:function(a){if(a=="password"){$("#newPasswordAlert").removeClass("normal");$("#newPasswordAlert").removeClass("ico_err");$("#newPasswordAlert").addClass("ico_valid")}else{if(a=="passwordConfirm"){$("#newPasswordAlert2").removeClass("normal");$("#newPasswordAlert2").removeClass("ico_err");$("#newPasswordAlert2").addClass("ico_valid")}}$("#pwErrorMessage").html("").hide();$("#pwConfirmErrorMessage").html("").hide()},_validCheckPassword:function(){var a=$.trim($("#newPassword").val());if(a==""){this._showPasswordDefaultlayer("password");this._showPasswordDefaultlayer("passwordConfirm");return false}var b=this._calculatePwResult();if(b==false){return false}return this._validCheckPasswordConfirm()},_validCheckPasswordConfirm:function(){var a=$.trim($("#newPassword").val());var b=$.trim($("#newPassword2").val());if(b==""){this._showPasswordDefaultlayer("passwordConfirm");return false}if(a!=b){$("#pwConfirmErrorMessage").html(Message.PASSWORD_CHANGE_3).show();this._showPasswordErrorlayer("passwordConfirm");return false}if(a==b&&b.length>this._MAX_PASSWORD_LENGTH){$("#pwConfirmErrorMessage").html(Message.PASSWORD_CHANGE_4).show();this._showPasswordErrorlayer("passwordConfirm");return false}this._showPasswordCorrectlayer("passwordConfirm");return true},_validCheckEmail:function(){var b=$.trim($("#newEmail").val());if(b==""){$("#emailLayer").removeClass("wrong");$("#emailLayer").removeClass("valid");$("#emailErrorMessage").html("").hide();$("#newPassword").focus();return false}var a=/(\.\.)|\.$|^(\.)/g;if(a.test(b)==true){$("#emailErrorMessage").html(Message.ID_CHANGE_1).show();return false}return true},_changePassword:function(){var c=this;this._isCorrectEmail=true;if($("#changeBtnLayer").hasClass("active")==false){return}if(!this._ajaxReady){return}if(this._bIsAvailableToChangeEmail){this._checkEmail().always(function(d){if(d){c._isCorrectEmail=true}else{c._isCorrectEmail=false}})}if(this._isCorrectEmail==false){return}if(this._bIsAvailableToChangePassword==false){return}if(!this._validCheckPassword()){return}if(this._isShowingCurrentPw==false){$("#currentPassword").val("")}var a;var b={};b.currentPassword=Base64.encode($("#currentPassword").val());b.newPassword=Base64.encode($("#newPassword").val());b.newEmail=$("#newEmail").val();b.usage=$("#usage").val();b.isAvailableToChangePassword=c._bIsAvailableToChangePassword;b.isAvailableToChangeEmail=c._bIsAvailableToChangeEmail;b.targetUserTenantId=c._oTenantConfig.tenantId;b.targetUserDomainId=c._oTenantConfig.domainId;b.targetUserIdNo=$("#userIdNo").val();b.targetCurrentEmail=$("#currentEmail").val();b.token=$("#token").val();b.keepLoginYn=$("#keepLoginYn").val();b.serviceCode=$("#serviceCode").val();b.partnerDomainId=$("#partnerDomainId").val();b.privateInfo=$("#privateInfo").val();b.isTempId=$("#isTempId").val();if($("#useTwoStepLogin").val()=="Y"&&$("#serviceCode").val()=="login_web"){b.accessUrl=$("#accessUrl").val();a="/integrate/password/two-step/expired"}else{a="/integrate/password/passwordChange"}this._ajaxReady=false;$.ajax({url:a,type:"POST",data:b,success:function(e){c._ajaxReady=true;if(e.returnCode=="00"){if($("#usage").val()=="mobileAdmin"){var f="?";if(($("#accessUrl").val()).includes("?")){f="&"}$("#accessUrl").val($("#accessUrl").val()+f+"isChangePw=true")}if(e.useTwoStepLoginYn=="Y"){$("#successLayerCloseBtn").attr("data-useTwoStepLogin","Y");$("#successLayerCloseBtn").attr("data-twoStepNextUrl",e.nextUrl);var d=$("#twoStepLogin");$(d).find("input[name=usage]").val(e.usage);$(d).find("input[name=redirectUrl]").val(e.redirectUrl);$(d).find("input[name=userIdNo]").val(e.userIdNo);$(d).find("input[name=domainId]").val(e.domainId);$(d).find("input[name=sessionKey]").val(e.sessionKey)}c._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_SUCCESS)}else{if(e.returnCode==c._nReturnCodeDomainChangeName){window.location=e.redirectUrl}else{if(e.returnCode>100){$("#emailErrorMessage").html(e.returnMessage).show()}else{if(e.returnCode==23){$("#currentErrorMessage").html(e.returnMessage).show()}else{$("#pwErrorMessage").html(e.returnMessage).show()}}}}},error:function(){c._ajaxReady=true}})},_checkEmail:function(){var a=$.Deferred();var b=this;if(this._bIsAvailableToChangeEmail){if(!this._validCheckEmail()){return false}}$.ajax({async:false,url:"/integrate/email/checkValidation",type:"POST",data:{newEmail:$("#newEmail").val(),targetUserDomainId:b._oTenantConfig.domainId,targetUserIdNo:$("#userIdNo").val()},success:function(c){if(c.returnCode=="00"){$("#emailLayer").removeClass("wrong");$("#emailErrorMessage").html("").hide();a.resolve(true)}else{$("#emailErrorMessage").html(c.returnMessage).show();$("#emailLayer").addClass("wrong");a.reject(false)}},error:function(c){a.reject(false)}});return a},_doCheckSafetyLevel:function(){var b=this;var a=$("#newPassword").val();if(a==""){this._showPasswordDefaultlayer("password");this._showPasswordDefaultlayer("passwordConfirm");return false}if(a.length>=b._oTenantConfig.passwordMinLength){this._ajaxReady=false;$.ajax({url:"/passwordGrade/getLevel",type:"POST",data:{password:a,tenantId:b._oTenantConfig.tenantId,domainId:b._oTenantConfig.domainId},success:function(c){b.passwordLevel=c.level;b.passwordSafetyReason=c.reason;b._ajaxReady=true;b._calculatePwResult()},error:function(){b._ajaxReady=true}})}else{b._ajaxReady=true;b.passwordLevel=1;b.passwordSafetyReason="";b._calculatePwResult()}},_calculatePwResult:function(){var b=this.passwordLevel;var a=this._oTenantConfig.passwordDifficultyType;if(b==""||b<=1){if(this.passwordSafetyReason=="REPEAT_CHAR"){$("#pwErrorMessage").html(Message.PASSWORD_CHANGE_5).show();this._showPasswordErrorlayer("password");return false}if(a=="1"){$("#pwErrorMessage").html(Message.replaceParam(Message.PASSWORD_CHANGE_6,this._oTenantConfig.passwordMinLength)).show()}else{$("#pwErrorMessage").html(Message.replaceParam(Message.PASSWORD_CHANGE_7,this._oTenantConfig.passwordMinLength)).show()}this._showPasswordErrorlayer("password");return false}this._showPasswordCorrectlayer("password");return this._validCheckPasswordConfirm()},_askChangePassword:function(){if(!this._ajaxReady){return}var a=this;this._ajaxReady=false;$.ajax({url:"/integrate/password/askPasswordChange",type:"POST",data:{tenantId:a._oTenantConfig.tenantId,domainId:a._oTenantConfig.domainId,userIdNo:$("#userIdNo").val()},success:function(b){a._ajaxReady=true;if(b.returnCode=="00"){if($("#accessUrl").val()!=""){$("#accessUrl").val($("#accessUrl").val()+"?loginUpdateRequest=true&targetUserIdNo="+$("#userIdNo").val())}a._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_ASK_SUCCESS)}},error:function(){a._ajaxReady=true}})},_onlyChangeEmail:function(){var a=this;if(!this._validCheckEmail()){return false}this._ajaxReady=false;$.ajax({url:"/integrate/email/changeEmail",type:"POST",data:{targetUserTenantId:a._oTenantConfig.tenantId,targetUserDomainId:a._oTenantConfig.domainId,targetCurrentEmail:$("#currentEmail").val(),targetUserIdNo:$("#userIdNo").val(),newEmail:$("#newEmail").val(),usage:$("#usage").val(),partnerDomainId:$("#partnerDomainId").val(),isTempId:$("#isTempId").val()},success:function(b){a._ajaxReady=true;if(b.returnCode=="00"){if($("#usage").val()=="mobileAdmin"){}a._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_SUCCESS)}else{if(b.returnCode==a._nReturnCodeDomainChangeName){window.location=b.redirectUrl}else{if(b.returnCode>100){$("#emailErrorMessage").html(b.returnMessage).show()}else{if(b.returnCode==23){$("#currentErrorMessage").html(b.returnMessage).show()}else{$("#pwErrorMessage").html(b.returnMessage).show()}}}}},error:function(){a._ajaxReady=true}})},_showSuccessLayer:function(a){$("#successMessage").html(a);$("#changeSuccessLayer").show();$("#successLayerCloseBtn").focus()},_loadLcs:function(){var a=this._getLcsStiByUsage();if(this._isNcs==false&&a!=""){sendLcs(a)}},_getLcsStiByUsage:function(){var a="";var b=$("#usage").val();if(b=="admin"||b=="mobileAdmin"){a="worksmobile_admin_auth_pwchangebyadmin"}else{if(b=="profile"||b=="mobile"){a="worksmobile_admin_auth_pwchange"}else{if(b=="expiredPassword"||b=="relieveBlackList"){a="worksmobile_admin_auth_pwchangeforexpired"}else{if(b=="changePassword"){a="worksmobile_admin_auth_pwchangeforfind"}}}}return a}};SnsFingerPrint=function(){this.init.apply(this,arguments)};SnsFingerPrint.prototype={_sRedirectUrl:"",_sUserIdNo:"",_sDomainId:"",_sTenantId:"",_sLoginType:"",_sBrowserLanguage:"",_sEmail:"",_sAccessUrl:"",_bIsParentPage:"",_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(d,c,a,e,g,h,b,j,f,i){this._sRedirectUrl=d;this._sUserIdNo=c;this._sDomainId=a;this._sTenantId=e;this._sLoginType=g;this._sBrowserLanguage=h;this._sIsWebLoginView=b;this._sEmail=j;this._sAccessUrl=f;this._bIsParentPage=i;this._setFingerPrint()},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})},500)}}catch(a){b._redirectView()}},_makeFingerPrintDetail:function(a,f){var e="";for(var d in f){var g=f[d];if(!g){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}return e},_call:function(a,b){var c=this;$.ajax({url:"/api/device/sns/fingerprint",type:"POST",async:false,dataType:"json",data:({userIdNo:this._sUserIdNo,domainId:this._sDomainId,tenantId:this._sTenantId,loginType:this._sLoginType,fingerPrint:a,language:this._sBrowserLanguage,fingerPrintDetail:b,email:this._sEmail,accessUrl:this._sAccessUrl}),success:function(d){c._redirectView()},error:function(d,f,e){c._redirectView()}})},_redirectView:function(){var a=this;if(a._sIsWebLoginView){if(a._bIsParentPage=="true"){window.location.href=a._sAccessUrl}else{document.domain="worksmobile.com";window.opener.location.reload();self.close()}}else{window.location.href=a._sRedirectUrl}}};SsoFingerPrint=function(){this.init.apply(this,arguments)};SsoFingerPrint.prototype={_sRedirectUrl:"",_sKey:"",_sSsoType:"",_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(b,c,a){this._sRedirectUrl=b;this._sKey=c;this._sSsoType=a;this._setFingerPrint()},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})},500)}}catch(a){window.location.href=this._sRedirectUrl}},_makeFingerPrintDetail:function(a,f){var e="";for(var d in f){var g=f[d];if(!g){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}return e},_call:function(a,b){var c=this;$.ajax({url:"/api/sso/fingerprint/set",type:"POST",async:false,dataType:"json",data:({url:this._sRedirectUrl,key:this._sKey,ssoType:this._sSsoType,fingerPrint:a,fingerPrintDetail:b}),success:function(d){window.location.href=c._sRedirectUrl},error:function(d,f,e){window.location.href=c._sRedirectUrl}})}};window.onerror=function(d,b,g,c,a){var f=(window.navigator||{}).userAgent;var b=(b==undefined)?"":b;var e={message:(d==undefined)?"":d,url:b,lineNo:(g==undefined)?"":g,colNo:(c==undefined)?"":c,error:(a==undefined)?"":a.stack,userAgent:(f==undefined)?"":f};if(isUserAgentUnderIE10(f)){return}if(b.toLowerCase().indexOf("auth.")==-1){return}sendNelo(e)};function isUserAgentUnderIE10(a){return/(MSIE (9|8|7)|Trident\/(5|4|3))/.test(a)}function sendNelo(a){try{var c=new XMLHttpRequest();c.open("POST","/client/error/send");c.setRequestHeader("Content-Type","application/json");c.send(JSON.stringify(a))}catch(b){}};PhoneLink=function(){this.init.apply(this,arguments)};PhoneLink.prototype={_isMobile:true,_usageCode:"",_notPhoneRegex:/[^0-9^\-]/,_ENTER_KEY_CODE:13,_MAX_PHONE_NUMBER_LENGTH:24,_CERT_NUMBER_LENGTH:4,_phoneValid:false,_authNoKey:"",_countryCode:"",_phoneNumber:"",_certValid:false,_isCertFailed:false,_showCertInvalid:false,_isResend:false,_usageCodeKey:"usageCode",_redirectUrlKey:"redirectUrlForContact",_initialUrlKey:"initialUrl",_nReturnCodeSmsSendExceedDailyMaxCount:27,init:function(a,c,b,d){this._isMobile=a;this._usageCode=d;if(a==false){$("#close_button").hide()}else{$("#close_button").click(function(){location.href="http://close"})}this._saveUsageCode();this._saveRedirectUrl();this._saveInitialUrl();this._attachEvent();if(b){$("#phone_input").val(b).focus()}else{$("#phone_input").focus()}if(c){$("#select_box").val(c)}$("#country_code").html($("option:selected",$("#select_box")).attr("data-name"))},_attachEvent:function(){var a=this;$("#send_button").click(function(){a._clickSmsButton()});$("#verify_button").click(function(){a._clickVerifyButton()});$("#cert_input").on("propertychange change keyup paste input",function(){a._checkCertNumber();if(a._isResend){$("#phone_resend_message").hide()}}).focus(function(){a._hideCertInvalidMessage();a._removeFailedCertNum()}).click(function(){a._hideCertInvalidMessage();a._removeFailedCertNum()}).keydown(function(b){a._hideCertInvalidMessage();a._removeFailedCertNum();if(b.keyCode==a._ENTER_KEY_CODE){a._clickVerifyButton()}});$("#select_box").change(function(){$("#country_code").html($("option:selected",this).attr("data-name"))})},_clickSmsButton:function(){var a=this._convertToHalfWidth($.trim($("#phone_input").val()));var b=$("#select_box").val();this._phoneValid=this._checkPhoneNumber(a);if(this._phoneValid){this._sendSms(b,a)}},_sendSms:function(c,a){var b=this;$.post("/otherLogin/sms/send",{countryCode:c,phoneNo:a},function(d){if(d.returnCode=="00"){b._countryCode=c;b._phoneNumber=a;b._authNoKey=d.data;$("#phone_input").prop("disabled",true);$("#cert_input").prop("disabled",false);$("#select_box").prop("disabled",true);$(".picker_cover").attr("class","picker_cover disabled");$("#send_button").html(Message.SMS_RESEND_BUTTON);if(b._isResend){$("#phone_resend_message").show()}else{b._isResend=true}}else{alert(d.returnMessage);if(d.returnCode==b._nReturnCodeSmsSendExceedDailyMaxCount){$("#phone_input").prop("disabled",false).val("");$("#cert_input").prop("disabled",true).val("");$("#select_box").prop("disabled",false).attr("class","picker_cover");$(".picker_cover").attr("class","picker_cover");$("#send_button").html(Message.SMS_SEND_BUTTON);$("#phone_resend_message").hide();b._isResend=false}}})},_checkPhoneNumber:function(a){if(this._notPhoneRegex.test(a)||a.length>this._MAX_PHONE_NUMBER_LENGTH||a.length<=0){$("#phone_invalid").show();return false}else{$("#phone_invalid").hide();return true}},_clickVerifyButton:function(){if(!this._certValid){return}var a=this._convertToHalfWidth($.trim($("#cert_input").val()));this._verify(a)},_verify:function(a){var b=this;$.post("/otherLogin/sms/verify",{authNoKey:this._authNoKey,countryCode:this._countryCode,phoneNo:this._phoneNumber,verificationCode:a},function(c){if(c.returnCode=="00"){location.replace("/otherLogin/phone/link/view/result?code="+encodeURIComponent(c.data)+"&isMobile="+b._isMobile)}else{b._certValid=false;b._isCertFailed=true;b._showCertInvalidMessage(c.returnMessage);b._changeToInvalidCertInput();b._toggleVerifyButton(false)}})},_checkCertNumber:function(){var b=this;if(!b._authNoKey){b._toggleVerifyButton(false);return}var a=b._convertToHalfWidth($.trim($("#cert_input").val()));if(a.length==b._CERT_NUMBER_LENGTH){b._certValid=true;b._toggleVerifyButton(true)}else{b._certValid=false;b._toggleVerifyButton(false)}},_toggleVerifyButton:function(a){var b=$("#verify_button");if(a){b.attr("class","btn_next_step active")}else{b.attr("class","btn_next_step inactive")}},_hideCertInvalidMessage:function(){this._showCertInvalid=false;$("#cert_invalid").html("").hide()},_showCertInvalidMessage:function(a){this._showCertInvalid=true;$("#cert_invalid").html(a).show()},_changeToInvalidCertInput:function(){$("#cert_input").attr("class","invalid")},_removeFailedCertNum:function(){var a=this;if(a._isCertFailed){a._isCertFailed=false;$("#cert_input").val("").attr("class","")}},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_saveUsageCode:function(){var a=this;var b=a._usageCode;if(b){sessionStorage.setItem(a._usageCodeKey,b)}},_saveRedirectUrl:function(){var a=this;var b=a._getUrlParam("redirectUrl");if(b){sessionStorage.setItem(a._redirectUrlKey,b)}},_saveInitialUrl:function(){var b=this;var a=window.location.pathname+window.location.search;if(a){sessionStorage.setItem(b._initialUrlKey,a)}},_getUrlParam:function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);if(b==null){return null}else{return decodeURI(b[1])||0}}};PhoneResult=function(){this.init.apply(this,arguments)};PhoneResult.prototype={_isMobile:true,_usageCode:"",_redirectUrl:"",_phoneAuthCode:"",_usageCodeKey:"usageCode",_redirectUrlKey:"redirectUrlForContact",_initialUrlKey:"initialUrl",_usageWebProfile:"web_profile",_usageMobileProfile:"mobile_profile",_usageWebTalk:"web_talk",_usageMobileTalk:"mobile_talk",_usagePcTalk:"pc_talk",init:function(a,b){if(a==false){$("#close_button").hide()}else{$("#close_button").click(function(){location.href="http://close"})}this._isMobile=a;this._phoneAuthCode=b;this._usageCode=this._getUsageCode();this._redirectUrl=this._getRedirectUrl();this._attachEvent()},_attachEvent:function(){var a=this;$("#connect_button").click(function(){a._connectPhoneNumber($("#save_contact").is(":checked"))});$("#retry_button").click(function(){location.replace(sessionStorage.getItem(a._initialUrlKey))});$("#disconnect_button").click(function(){a._disconnectPhoneNumber()})},_getUsageCode:function(){var a=this;return sessionStorage.getItem(a._usageCodeKey)},_getRedirectUrl:function(){var a=this;var b=sessionStorage.getItem(a._redirectUrlKey);if(b){return decodeURIComponent(b)}return null},_connectPhoneNumber:function(a){var b=this;$.post("/otherLogin/phone/link",{code:b._phoneAuthCode,profile:a},function(c){if(c.returnCode=="00"){b._handleSuccess()}else{b._handleError(c.returnMessage)}})},_disconnectPhoneNumber:function(){var a=this;$.post("/otherLogin/phone/unlink",{code:a._phoneAuthCode},function(b){if(b.returnCode=="00"){window.location.replace("/otherLogin/phone/link/view/result?code="+encodeURIComponent(b.data)+"&isMobile="+a._isMobile)}else{a._handleError(b.returnMessage)}})},_handleSuccess:function(){var a=this;if(a._usageCode===a._usageMobileTalk){location.href="http://close"}else{if(a._usageCode===a._usageMobileProfile){worksAuth.linkOtherLogin("phone",true,null)}else{a._moveToContactUrl("")}}},_handleError:function(b){var a=this;if(a._usageCode===a._usageMobileTalk){alert(b);location.href="http://close"}else{if(a._usageCode===a._usageMobileProfile){worksAuth.linkOtherLogin("phone",false,b)}else{a._moveToContactUrl(b)}}},_moveToContactUrl:function(c){var a=this;if(a._redirectUrl){sessionStorage.removeItem(a._redirectUrlKey);var b="message="+encodeURIComponent(c);if(a._redirectUrl.indexOf("?")>0){b="&"+b}else{b="?"+b}location.replace(a._redirectUrl+b)}else{if(c){alert(c)}window.open("about:blank","_self").close()}}};TwoStepLink=function(){this.init.apply(this,arguments)};TwoStepLink.prototype={_oTwoStepLogin:"",_domainUsePhoneLogin:"",_bIsExistPrivateEmail:"",_bIsExistPhoneNo:"",_SELECTED_TYPE_KEY:"selectedLoginType",_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidPrivateEmail:13,_nInvalidPhoneNumber:14,_nInvalidIdOrPassword:20,_nNotExistMember:21,_nLoginStopUser:22,_nFailLoginAppBlockedUser:27,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nNoServiceAuth:54,_nThirdPartyMdmOtherDomainLoginRestricted:55,_nUnavailableDomain:72,_nUnavailableDomain2:75,_nUnavailableDomain3:76,_nLoginSessionExpired:90,_nUnexpectedError:99,_nOngoingProductUpdate:140,_nDomainChangeName:141,_nAbuser:998,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",init:function(a,b,c){var d=this;d._oTwoStepLogin=a;d._domainUsePhoneLogin=c;if(a.privateEmail){$("#privateEmail").val(a.privateEmail);d._bIsExistPrivateEmail="true"}if(a.phoneNo){$("#phoneNo").val(a.phoneNo);d._bIsExistPhoneNo="true"}if(b){$("#selectBox").val(b)}if(c=="false"&&d._bIsExistPrivateEmail!="true"){$("#domainUsePhoneLogin").attr("style","display:none;")}if(d._bIsExistPhoneNo!="true"){$("#isExistPhoneNumber").attr("style","display:none;")}$("#selected").html($("option:selected",$("#selectBox")).attr("data-name"));d._initRegisterButton();d._attachEvent()},_attachEvent:function(){var a=this;$("#selectBox").change(function(){$("#selected").html($("option:selected",this).attr("data-name"))});$("#register").on("click",function(){a._register()});$("#removePrivateEmail").on("click",function(){$("#privateEmail").val("");a._sPrivateEmail="";a._enableRegisterButton()});$("#removePhoneNo").on("click",function(){$("#phoneNo").val("");a._sPhoneNumber="";a._enableRegisterButton()});$("#phoneNo").on("input",function(){a._limitPhoneNumber();var b=$("#phoneNo").val();if(b.length>0){a._hidePhoneErrorMessage();a._hidePhoneVerifyMessage();$("#register").attr("disabled",false)}}).focusout(function(){a._enableRegisterButton()});$("#privateEmail").on("input",function(){a._limitPrivateEmail();var b=$("#privateEmail").val();if(b.length>0){a._hidePrivateEmailErrorMessage();a._hidePrivateEmailVerifyMessage();$("#register").attr("disabled",false)}}).focusout(function(){a._enableRegisterButton()});$("#mobileClose").on("click",function(){worksAuth.didFinishConnect2StepVerify(false)})},_initRegisterButton:function(){var a=this;a._disableRegisterButton();a._enableRegisterButton()},_validatePhoneNumber:function(){var c=this;c._limitPhoneNumber();var a=c._convertToHalfWidth($("#phoneNo").val());var b=new RegExp("^[0-9]+([0-9]+|(-[0-9]+))+$");if(b.test(a)==false){c._showPhoneErrorMessage();c._disableRegisterButton();return false}return true},_validatePrivateEmail:function(){var c=this;c._limitPrivateEmail();var a=c._convertToHalfWidth($("#privateEmail").val());var b=new RegExp("^[\\-_.0-9a-zA-Z]{1,64}@[\\-_.0-9a-zA-Z]+\\.[a-zA-z]{2,}$");if(b.test(a)==false){c._showPrivateEmailVerifyMessage();return false}return true},_showPhoneErrorMessage:function(){$("#phoneNoInvalid").show()},_showPhoneVerifyMessage:function(){$("#phoneNoVerify").show()},_hidePhoneErrorMessage:function(){$("#phoneNoInvalid").hide()},_hidePhoneVerifyMessage:function(){$("#phoneNoVerify").hide()},_showPrivateEmailErrorMessage:function(){$("#privateEmailInvalid").show()},_showPrivateEmailVerifyMessage:function(){$("#privateEmailVerify").show()},_hidePrivateEmailErrorMessage:function(){$("#privateEmailInvalid").hide()},_hidePrivateEmailVerifyMessage:function(){$("#privateEmailVerify").hide()},_disableRegisterButton:function(){$("#register").attr("disabled",true)},_limitPrivateEmail:function(){var b=this;var a=$("#privateEmail").val();if(a.length>255){$("#privateEmail").val(a.substr(0,255))}},_limitPhoneNumber:function(){var b=this;var a=$("#phoneNo").val();if(a.length>24){$("#phoneNo").val(a.substr(0,24))}},_enableRegisterButton:function(){var d=this;var c=d._convertToHalfWidth($("#privateEmail").val());var b=d._convertToHalfWidth($("#phoneNo").val());var a=true;if(d._domainUsePhoneLogin=="true"||d._bIsExistPrivateEmail=="true"){if(c.length==0){d._disableRegisterButton();d._showPrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage();a=false}else{if(d._validatePrivateEmail()==false){d._hidePrivateEmailErrorMessage();d._disableRegisterButton();a=false}else{d._hidePrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage()}}}else{if(c.length>0){if(d._validatePrivateEmail()==false){d._showPrivateEmailVerifyMessage();d._disableRegisterButton();a=false}else{d._hidePrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage()}}else{d._hidePrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage()}}if(d._bIsExistPhoneNo=="true"){if(b.length==0){d._disableRegisterButton();d._hidePhoneErrorMessage();d._showPhoneVerifyMessage();a=false}}if(b.length>0){if(d._validatePhoneNumber()==false){d._disableRegisterButton();d._showPhoneErrorMessage();d._hidePhoneVerifyMessage();a=false}else{d._hidePhoneErrorMessage();d._hidePhoneVerifyMessage()}}if(c.length==0&&b.length==0){d._disableRegisterButton();a=false}if(a==true){$("#register").attr("disabled",false)}return a},_register:function(){var f=this;try{if(f._enableRegisterButton()==false){return}var b=$("#privateEmail").val();var a=$("#phoneNo").val();f._oTwoStepLogin.privateEmail=f._convertToHalfWidth($.trim(b));f._oTwoStepLogin.phoneNo=f._convertToHalfWidth($.trim(a));var c=f._oTwoStepLogin.phoneNo==""?"":$("#selectBox").val();$.ajax({url:"/2step-login/link/register",type:"POST",async:false,dataType:"json",data:({userIdNo:f._oTwoStepLogin.userIdNo,domainId:f._oTwoStepLogin.domainId,twoStepLoginUsage:f._oTwoStepLogin.twoStepLoginUsage,privateEmail:f._oTwoStepLogin.privateEmail,phoneNo:f._oTwoStepLogin.phoneNo,domainUseOrgSync:false,countryCode:c,sessionKey:f._oTwoStepLogin.sessionKey,redirectUrl:f._oTwoStepLogin.redirectUrl}),success:function(g){var e=f._oTwoStepLogin.twoStepLoginUsage;if(g.code==0){if(e=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(true)}else{if(e=="web_profile"){if(g.redirectUrl==""){window.close()}else{window.location=g.redirectUrl}}else{if(e=="mobile_login"){var h="/login/mSuccess?userIdNo="+g.userIdNo+"&domainId="+g.domainId+"&tenantId="+g.tenantId+"&email="+g.email;if(g.useDomainAclYn){h+="&useDomainAclYn="+g.useDomainAclYn}else{if(g.domainAclList){h+="&domainAclList="+g.domainAclList}else{if(g.userIp){h+="&userIp="+g.userIp}}}window.location=h}else{if(e=="web_login"){sessionStorage.removeItem(f._SELECTED_TYPE_KEY);window.location=g.redirectUrl}else{if(e=="message_noti"){window.location=g.redirectUrl}else{window.close()}}}}}}else{if(g.code==f._nInvalidParameter||g.code==f._nInvalidDomainId||g.code==f._nNotExistMember||g.code==f._nUnexpectedError||g.code==f._nUserIsUsingPhoneLogin){if(e=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}else{if(g.code==f._nInvalidPrivateEmail){f._showPrivateEmailVerifyMessage()}else{if(g.code==f._nInvalidPhoneNumber){f._showPhoneVerifyMessage()}else{if(g.code==f._nLoginSessionExpired){if(e=="mobile_login"){window.location="/login/mFail?message="+f._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=f._oTwoStepLogin.redirectUrl}}else{if(g.code==f._nLoginStopUser||g.code==f._nFailLoginAppBlockedUser||g.code==f._nNoServiceAuth||g.code==f._nThirdPartyMdmOtherDomainLoginRestricted||g.code==f._nUnavailableDomain||g.code==f._nUnavailableDomain2||g.code==f._nUnavailableDomain3||g.code==f._nOngoingProductUpdate||g.code==f._nDomainChangeName||g.code==f._nAbuser||g.code==f._nInvalidIdOrPassword){if(f._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+g.returnMessageId}else{alert(g.returnMessage);window.location=f._oTwoStepLogin.redirectUrl}}else{if(e=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}}}}}}},error:function(e,h,g){window.close()}})}catch(d){window.close()}},_convertToHalfWidth:function(a){if(a.length==0){return a}return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})}};TwoStepOrg=function(){this.init.apply(this,arguments)};TwoStepOrg.prototype={_oTwoStepLogin:"",_domainUsePhoneLogin:"",_SELECTED_TYPE_KEY:"selectedLoginType",_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidIdOrPassword:20,_nNotExistMember:21,_nLoginStopUser:22,_nFailLoginAppBlockedUser:27,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nNoServiceAuth:54,_nThirdPartyMdmOtherDomainLoginRestricted:55,_nUnavailableDomain:72,_nUnavailableDomain2:75,_nUnavailableDomain3:76,_nLoginSessionExpired:90,_nUnexpectedError:99,_nOngoingProductUpdate:140,_nDomainChangeName:141,_nAbuser:998,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",init:function(a){var b=this;b._oTwoStepLogin=a;b._setPrivateEmail(a.privateEmail);b._setPhoneNumber(a.countryCode,a.phoneNo);b._showDefaultMessage();b._disableRegisterButton();b._enableRegisterButton();b._attachEvent()},_getEl:function(a){return $("#wrap ."+a)},_setPrivateEmail:function(a){if(a){$("#privateEmailText").text(a)}else{$("#privateEmail").attr("class","chk_cover disabled")}},_setPhoneNumber:function(a,b){if(b){$("#phoneNumberText").text(a+" "+b)}else{$("#phoneNumber").attr("class","chk_cover disabled")}},_disableRegisterButton:function(){$("#register").attr("disabled",true);$("#register").hide()},_enableRegisterButton:function(){var c=this;var b=c._oTwoStepLogin.privateEmail;var a=c._oTwoStepLogin.phoneNo;if(c._domainUsePhoneLogin=="true"){if(b.length==0){c._disableRegisterButton();return false}}if(b.length==0&&a.length==0){c._disableRegisterButton();return false}$("#register").attr("disabled",false);$("#register").show();return true},_showDefaultMessage:function(){var a=this;if(a._oTwoStepLogin.privateEmail||a._oTwoStepLogin.phoneNo){a._getEl("_authInfo").show()}else{a._getEl("_noAuthInfo").show()}},_attachEvent:function(){var a=this;$("#mobileClose").on("click",function(){worksAuth.didFinishConnect2StepVerify(false)});$("#register").on("click",function(){a._register()})},_register:function(){var b=this;try{$.ajax({url:"/2step-login/link/register",type:"POST",async:false,dataType:"json",data:({userIdNo:b._oTwoStepLogin.userIdNo,domainId:b._oTwoStepLogin.domainId,twoStepLoginUsage:b._oTwoStepLogin.twoStepLoginUsage,privateEmail:b._oTwoStepLogin.privateEmail,phoneNo:b._oTwoStepLogin.phoneNo,domainUseOrgSync:true,countryCode:"",sessionKey:b._oTwoStepLogin.sessionKey,redirectUrl:b._oTwoStepLogin.redirectUrl}),success:function(d){var c=b._oTwoStepLogin.twoStepLoginUsage;if(d.code==0){if(c=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(true)}else{if(c=="web_profile"){if(d.redirectUrl==""){window.close()}else{window.location=d.redirectUrl}}else{if(d.twoStepLoginUsage=="mobile_login"){var e="/login/mSuccess?userIdNo="+d.userIdNo+"&domainId="+d.domainId+"&tenantId="+d.tenantId+"&email="+d.email;if(d.useDomainAclYn){e+="&useDomainAclYn="+d.useDomainAclYn}else{if(d.domainAclList){e+="&domainAclList="+d.domainAclList}else{if(d.userIp){e+="&userIp="+d.userIp}}}window.location.href=e}else{if(c=="web_login"){window.location=d.redirectUrl;sessionStorage.removeItem(b._SELECTED_TYPE_KEY)}else{if(c=="message_noti"){window.location=d.redirectUrl}else{window.close()}}}}}}else{if(d.code==b._nInvalidParameter||d.code==b._nInvalidDomainId||d.code==b._nNotExistMember||d.code==b._nUnexpectedError||d.code==b._nUserIsUsingPhoneLogin){if(c=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}else{if(d.code==b._nLoginSessionExpired){if(c=="mobile_login"){window.location="/login/mFail?message="+b._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=b._oTwoStepLogin.redirectUrl}}else{if(d.code==b._nLoginStopUser||d.code==b._nFailLoginAppBlockedUser||d.code==b._nNoServiceAuth||d.code==b._nThirdPartyMdmOtherDomainLoginRestricted||d.code==b._nUnavailableDomain||d.code==b._nUnavailableDomain2||d.code==b._nUnavailableDomain3||d.code==b._nOngoingProductUpdate||d.code==b._nDomainChangeName||d.code==b._nAbuser||d.code==b._nInvalidIdOrPassword){if(b._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+d.returnMessageId}else{alert(d.returnMessage);window.location=b._oTwoStepLogin.redirectUrl}}else{if(c=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}}}}},error:function(c,e,d){window.close()}})}catch(a){window.close()}}};TwoStepLogin=function(){this.init.apply(this,arguments)};TwoStepLogin.prototype={_oTwoStepLogin:"",_bIsPhoneLogin:"",_domainUsePhoneLogin:"",_sDisplayEmail:"",_sDisplayPhoneNumber:"",_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidPrivateEmail:13,_nInvalidPhoneNumber:14,_nNotExistMember:21,_nSmsExceedDailyMaxCount:35,_nSmsExceed15MCountErrorCode:39,_nOverSendMailCount:40,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nUnexpectedError:99,init:function(b,d,a,c){var e=this;e._oTwoStepLogin=b;e._bIsPhoneLogin=d;e._sDisplayEmail=a;e._sDisplayPhoneNumber=c;e._initPrivateEmailAndPhoneNo();e._attachEvent()},_attachEvent:function(){var a=this;$("#privateEmailButton").on("click",function(){a._sendAuthNoToEmail()});$("#phoneNumberButton").on("click",function(){a._sendAuthNoToMobile()})},_getEl:function(a){return $("#content ."+a)},_initPrivateEmailAndPhoneNo:function(){var a=this;if(a._bIsPhoneLogin==false){a._getEl("_twoStepLoginProcess").attr("style","");a._showPrivateEmailLayer();a._showPhoneNumberLayer();if(a._oTwoStepLogin.privateEmail==""&&a._oTwoStepLogin.phoneNo==""){$("#errorContentsForNoAuth").attr("style","");$("#content").attr("style","display:none;")}else{if(a._oTwoStepLogin.privateEmail){a._setPrivateEmail()}if(a._oTwoStepLogin.phoneNo){a._setPhoneNumber()}}}else{if(a._oTwoStepLogin.privateEmail){a._getEl("_twoStepLoginProcess").attr("style","");a._showPrivateEmailLayer();a._setPrivateEmail()}else{$("#errorContentsForPhoneLogin").attr("style","");$("#content").attr("style","display:none;")}}},_showPhoneNumberLayer:function(){var a=this;a._getEl("_phoneNumber").attr("class","_phoneNumber item text disabled");a._getEl("_phoneNumber").attr("style","")},_showPrivateEmailLayer:function(){var a=this;a._getEl("_privateEmail").attr("class","_privateEmail item email disabled");a._getEl("_privateEmail").attr("style","")},_setPhoneNumber:function(){var a=this;$("#phoneNumberButton").attr("disabled",false);a._getEl("_phoneNumber").attr("class","_phoneNumber item text");$("#phoneNumber").text(a._oTwoStepLogin.countryCode+" "+a._sDisplayPhoneNumber)},_setPrivateEmail:function(){var a=this;$("#privateEmailButton").attr("disabled",false);a._getEl("_privateEmail").attr("class","_privateEmail item email");$("#privateEmail").text(a._sDisplayEmail)},_sendAuthNoToEmail:function(){var a=this;$.ajax({url:"/2step-login/auth/send/email",type:"POST",async:false,dataType:"json",data:({userIdNo:a._oTwoStepLogin.userIdNo,privateEmail:a._oTwoStepLogin.privateEmail,sessionKey:a._oTwoStepLogin.sessionKey}),success:function(c){if(c.code==0){var b=$("#twoStepLoginAuth");$(b).find("input[name=userIdNo]").val(a._oTwoStepLogin.userIdNo);$(b).find("input[name=privateEmail]").val(a._oTwoStepLogin.privateEmail);$(b).find("input[name=redirectUrl]").val(a._oTwoStepLogin.redirectUrl);$(b).find("input[name=authKey]").val(c.authKey);$(b).find("input[name=sessionKey]").val(a._oTwoStepLogin.sessionKey);$(b).find("input[name=twoStepLoginUsage]").val(a._oTwoStepLogin.twoStepLoginUsage);$(b).find("input[name=displayEmail]").val(a._sDisplayEmail);$(b).find("input[name=displayPhoneNumber]").val(a._sDisplayPhoneNumber);$(b).find("input[name=isPhoneLogin]").val(a._bIsPhoneLogin);$(b).attr("action","/2step-login/auth/email").submit()}else{if(c.code==a._nOverSendMailCount){alert(Message.OTP_VERIFY_03)}else{alert(Message.DEFAULT_ERROR_MESSAGE)}}},})},_sendAuthNoToMobile:function(){var a=this;$.ajax({url:"/2step-login/auth/send/phone",type:"POST",async:false,dataType:"json",data:({userIdNo:a._oTwoStepLogin.userIdNo,phoneNumber:a._oTwoStepLogin.phoneNo,countryCode:a._oTwoStepLogin.countryCode,sessionKey:a._oTwoStepLogin.sessionKey}),success:function(c){if(c.code==0){var b=$("#twoStepLoginAuth");$(b).find("input[name=userIdNo]").val(a._oTwoStepLogin.userIdNo);$(b).find("input[name=redirectUrl]").val(a._oTwoStepLogin.redirectUrl);$(b).find("input[name=countryCode]").val(a._oTwoStepLogin.countryCode);$(b).find("input[name=phoneNumber]").val(a._oTwoStepLogin.phoneNo);$(b).find("input[name=authKey]").val(c.authKey);$(b).find("input[name=sessionKey]").val(a._oTwoStepLogin.sessionKey);$(b).find("input[name=twoStepLoginUsage]").val(a._oTwoStepLogin.twoStepLoginUsage);$(b).find("input[name=displayEmail]").val(a._sDisplayEmail);$(b).find("input[name=displayPhoneNumber]").val(a._sDisplayPhoneNumber);$(b).find("input[name=isPhoneLogin]").val(a._bIsPhoneLogin);$(b).attr("action","/2step-login/auth/phone").submit()}else{if(c.code==a._nSmsExceedDailyMaxCount){alert(Message.OTP_VERIFY_04)}else{if(c.code==a._nSmsExceed15MCountErrorCode){alert(Message.OTP_VERIFY_03)}else{alert(Message.DEFAULT_ERROR_MESSAGE)}}}},})},};TwoStepLoginAuth=function(){this.init.apply(this,arguments)};TwoStepLoginAuth.prototype={_sCountryCode:"",_sPhoneNumber:"",_sPrivateEmail:"",_sUserIdNo:"",_sSessionKey:"",_sTwoStepLoginUsage:"",_sAuthType:"",_sAuthKey:"",_sDisplayEmail:"",_sDisplayPhoneNumber:"",_sRedirectUrl:"",_bIsPhoneLogin:"",_sDomainId:"",_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidPrivateEmail:13,_nInvalidPhoneNumber:14,_nInvalidIdOrPassword:20,_nNotExistMember:21,_nLoginStopUser:22,_nFailLoginAppBlockedUser:27,_nSmsExceedDailyMaxCount:35,_nAuthNumberIsInvalid:36,_nAuthNumberSessionExpired:37,_nSmsAuthNoIsNotValid:38,_nSmsExceed15MCountErrorCode:39,_nOverSendMailCount:40,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nNoServiceAuth:54,_nThirdPartyMdmOtherDomainLoginRestricted:55,_nUnavailableDomain:72,_nUnavailableDomain2:75,_nUnavailableDomain3:76,_nLoginSessionExpired:90,_nUnexpectedError:99,_nOngoingProductUpdate:140,_nDomainChangeName:141,_nAbuser:998,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_sTWOSTEP_LOGIN_VIEW:"/2step-login/view",_aEventQueue:new Array(),LEFT_ARROW_KEY:37,RIGHT_ARROW_KEY:39,UP_ARROW_KEY:38,DOWN_ARROW_KEY:40,BACKSPACE_KEY:8,ENTER_KEY_CODE:13,init:function(l,i,n,g,d,f,m,e,h,k,c,b,a){var j=this;j._sCountryCode=i;j._sPhoneNumber=n;j._sPrivateEmail=g;j._sUserIdNo=d;j._sSessionKey=f;j._sTwoStepLoginUsage=m;j._sAuthType=l;j._sAuthKey=e;j._sDisplayEmail=h;j._sDisplayPhoneNumber=k;j._sRedirectUrl=c;j._bIsPhoneLogin=b;j._sDomainId=a;j._initAuthInfo();j._attachEvent()},_attachEvent:function(){var a=this;$("._authNo").keydown(function(b){a._keydownProcess(b)});$("._authNo").on("keyup",function(b){a._checkAuthNo(b)});$("._authNo").on("click",function(b){b.stopPropagation();$(b.target).addClass("valid")}).focusout(function(b){b.stopPropagation();$(b.target).removeClass("valid")});$("#resendAuthNo").on("click",function(){a._reSendAuthNo()});$("#twoStepPrev").on("click",function(b){b.stopPropagation();b.preventDefault();a._goTwoStepLoginView()});$("._authNo").on("paste",function(b){a._pasteCatch(b)});$("._authNo").on("input",function(b){a._setCopyValue($(b.target))})},_getEl:function(a){return $("#wrap ."+a)},_goTwoStepLoginView:function(){var b=this;var a=$("#twoStepLogin");$(a).find("input[name=usage]").val(b._sTwoStepLoginUsage);$(a).find("input[name=redirectUrl]").val(b._sRedirectUrl);$(a).find("input[name=userIdNo]").val(b._sUserIdNo);$(a).find("input[name=domainId]").val(b._sDomainId);$(a).find("input[name=sessionKey]").val(b._sSessionKey);$(a).find("input[name=isPhoneLogin]").val(b._bIsPhoneLogin);$(a).attr("action",b._sTWOSTEP_LOGIN_VIEW).submit()},_initAuthInfo:function(){var a=this;if(a._sAuthType=="phone"){$("#phoneSentMessage").show();$("#twoStepAuthInfo").text(a._sCountryCode+" "+a._sDisplayPhoneNumber)}else{$("#emailSentMessage").show();$("#twoStepAuthInfo").text(a._sDisplayEmail)}},_keydownProcess:function(b){var a=$(b.target);var c=a.val().trim();if(b.keyCode===this.LEFT_ARROW_KEY||b.keyCode===this.RIGHT_ARROW_KEY||b.keyCode===this.BACKSPACE_KEY){return}else{if(b.keyCode===this.DOWN_ARROW_KEY){if(c==0){a.val(0);b.stopPropagation()}return}else{if(b.keyCode===this.UP_ARROW_KEY){if(c==9){a.val(9);b.stopPropagation()}return}else{this._lengthCheck(a)}}}},_lengthCheck:function(a){if(a.attr("data-no")==="4"&&a.val().length>=1){a.attr("readonly",true)}if(a.val().length>=1){if(a.attr("data-selected")==="y"){a.attr("data-selected","n");return}this._nextAuthNo(a)}},_nextAuthNo:function(b){var a=b.attr("data-no");b.attr("data-selected","n");$("._authNo").each(function(){if(parseInt($(this).attr("data-no"))===parseInt(a)+1){if($(this).val()!==""){$(this).select()}else{$(this).focus()}return false}})},_selectOrFocus:function(a){if(a.val()==null||a.val()===""){a.focus();a.attr("data-selected","n")}else{a.select();a.attr("data-selected","y")}},_checkAuthNo:function(d){var g=this;var a=$(d.target);var c=parseInt(a.attr("data-no"));var f=a.val().trim();if(d.keyCode===this.LEFT_ARROW_KEY){if(c===1){return}this._selectOrFocus($("._authNo"+(c-1)));return}else{if(d.keyCode===this.RIGHT_ARROW_KEY){if(c===4){return}this._selectOrFocus($("._authNo"+(c+1)));return}else{if(d.keyCode===this.UP_ARROW_KEY){if(f>9){a.val(9)}return}else{if(d.keyCode===this.DOWN_ARROW_KEY){if(f<0){a.val(0)}return}else{if(d.keyCode===this.BACKSPACE_KEY){this._selectOrFocus($("._authNo"+(c-1)))}}}}}if(f==null||f===""){a.val("");return}this._hideFailElement();this._hideResendMessage();$("._authNo").each(function(){$(this).attr("readonly",false)});var b=this._makeAuthNo();if(b.length===4){if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}}else{if(a.attr("data-no")==="1"){a.focus()}this._nextAuthNo(a)}},_sendAuthNoToEmail:function(){var a=this;$.ajax({url:"/2step-login/auth/send/email",type:"POST",async:false,dataType:"json",data:({userIdNo:a._sUserIdNo,privateEmail:a._sPrivateEmail,sessionKey:a._sSessionKey}),success:function(b){if(b.code==0){a._sAuthKey=b.authKey;a._showResendMessage()}else{if(b.code==a._nOverSendMailCount){alert(Message.OTP_VERIFY_03);a._goTwoStepLoginView()}else{alert(Message.DEFAULT_ERROR_MESSAGE);a._goTwoStepLoginView()}}a._resetInput()},})},_sendAuthNoToMobile:function(){var a=this;$.ajax({url:"/2step-login/auth/send/phone",type:"POST",async:false,dataType:"json",data:({userIdNo:a._sUserIdNo,phoneNumber:a._sPhoneNumber,countryCode:a._sCountryCode,sessionKey:a._sSessionKey}),success:function(b){if(b.code==0){a._sAuthKey=b.authKey;a._showResendMessage()}else{if(b.code==a._nSmsExceedDailyMaxCount){alert(Message.OTP_VERIFY_04);a._goTwoStepLoginView()}else{if(b.code==a._nSmsExceed15MCountErrorCode){alert(Message.OTP_VERIFY_03);a._goTwoStepLoginView()}else{alert(Message.DEFAULT_ERROR_MESSAGE);a._goTwoStepLoginView()}}}a._resetInput()},})},_reSendAuthNo:function(){var b=this;var a=b._sAuthType;b._hideResendMessage();if(a=="phone"){b._sendAuthNoToMobile()}else{b._sendAuthNoToEmail()}},_pasteCatch:function(f){if(oNweCommonUtils.isMsBrowser()==false){return}var j=f.originalEvent.clipboardData||window.clipboardData;if(j==null){return}var g=j.getData("Text");if(g===""||g==null){return}var b=parseInt($(f.target).attr("data-no"));var c=0;for(var d=b;d<g.length+b;d++){$("._authNo"+d).val(g.slice(c,++c));this._addInputHighlight($("._authNo"+d));if(d===4){break}}this._hideFailElement();var a=this._makeAuthNo();if(a.length<4){f.preventDefault();return}var h=this;if(this._pushQueue(a)){setTimeout(function(){h._processQueue()},200)}},_setCopyValue:function(a){if(oNweCommonUtils.isMsBrowser()){return}var g=this;var c=a.val();if(c.length<2){return}a.val("");var f=parseInt(a.attr("data-no"));c=c.substr(0,4);var d=0;for(var e=f;e<c.length+f;e++){$("._authNo"+e).val(c.slice(d,++d));if(g._bIsMobile===false){g._addInputHighlight($("._authNo"+e))}else{g._addInputHighlight($("._authNo"+e).parents("p"))}}if(c.length<4){$("._authNo"+(c.length+1)).focus()}this._hideFailElement();var b=g._makeAuthNo();if(b.length<4){return}if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}},_addInputHighlight:function(a){a.addClass("valid")},_hideFailElement:function(){$("#failMessage").hide();$("#checkNumber").removeClass("invalid")},_showFailElement:function(a){$("#failMessage").text(a);$("#failMessage").show()},_showResendMessage:function(){$("#resendMessage").show();this._hideFailElement()},_hideResendMessage:function(){$("#resendMessage").hide()},_resetInput:function(){$("._authNo").val("");$("._authNo1").focus()},_makeAuthNo:function(){var a="";$("._authNo").each(function(){a+=$(this).val()});return a},_pushQueue:function(a){var b=this;if(b._aEventQueue.length===0){b._aEventQueue.push(a);return true}return false},_processQueue:function(){this._requestAuthNoCheck(this._aEventQueue.shift())},_requestAuthNoCheck:function(a){var b=this;$("._authNo").prop("disabled",true);$.ajax({type:"post",async:false,url:"/2step-login/login/process/"+b._sAuthType,data:{userIdNo:b._sUserIdNo,phoneNumber:b._sPhoneNumber,countryCode:b._sCountryCode,privateEmail:b._sPrivateEmail,sessionKey:b._sSessionKey,authNo:a,authKey:b._sAuthKey,redirectUrl:b._sRedirectUrl},success:function(c){$("._authNo").prop("disabled",false);if(c.code==0){if(c.twoStepLoginUsage=="web_login"){sessionStorage.removeItem(b._SELECTED_TYPE_KEY);window.location.href=c.redirectUrl}if(c.twoStepLoginUsage=="mobile_login"){var d="/login/mSuccess?userIdNo="+c.userIdNo+"&domainId="+c.domainId+"&tenantId="+c.tenantId+"&email="+c.email;if(c.useDomainAclYn){d+="&useDomainAclYn="+c.useDomainAclYn}else{if(c.domainAclList){d+="&domainAclList="+c.domainAclList}else{if(c.userIp){d+="&userIp="+c.userIp}}}window.location.href=d}}else{if(c.code==b._nSmsAuthNoIsNotValid){$("#checkNumber").addClass("invalid");b._showFailElement(Message.replaceParam(Message.OTP_VERIFY_02,c.failCount+"/"+c.maxFailCount))}else{if(c.code==b._nAuthNumberSessionExpired){$("#checkNumber").addClass("invalid");b._showFailElement(Message.OTP_VERIFY_01)}else{if(c.code==b._nAuthNumberIsInvalid){$("#checkNumber").addClass("invalid");b._showFailElement(Message.replaceParam(Message.OTP_VERIFY_02,c.failCount+"/"+c.maxFailCount))}else{if(c.code==b._nLoginSessionExpired){if(b._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+b._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=b._sRedirectUrl}}else{if(c.code==b._nLoginStopUser||c.code==b._nFailLoginAppBlockedUser||c.code==b._nNoServiceAuth||c.code==b._nThirdPartyMdmOtherDomainLoginRestricted||c.code==b._nUnavailableDomain||c.code==b._nUnavailableDomain2||c.code==b._nUnavailableDomain3||c.code==b._nOngoingProductUpdate||c.code==b._nDomainChangeName||c.code==b._nAbuser||c.code==b._nInvalidIdOrPassword){if(b._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+c.returnMessageId}else{alert(c.returnMessage);window.location=b._sRedirectUrl}}else{$("#failMessage").text(Message.DEFAULT_ERROR_MESSAGE);$("#failMessage").show()}}}}}}b._resetInput()}})},};